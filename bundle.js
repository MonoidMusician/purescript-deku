var es=function(n){return function(t){for(var r=n.length,e=t.length,a=new Array(r*e),u=0,i=0;i<r;i++)for(var f=n[i],v=0;v<e;v++)a[u++]=f(t[v]);return a}};var ga={compose:function(n){return function(t){return function(r){return n(t(r))}}}},Ye=function(n){return n.compose};var K=function(n){return n.identity},j={identity:function(n){return n},Semigroupoid0:function(){return ga}};var er=!0;var Pf=function(n){return function(t){return function(r){return function(e){return n(t(r))(t(e))}}}},ct=function(n){return function(t){return function(r){return n(r)(t)}}},L=function(n){return function(t){return n}};var Nf=function(n){return function(t){return t(n)}};var as=function(n){return function(t){for(var r=t.length,e=new Array(r),a=0;a<r;a++)e[a]=n(t[a]);return e}};var M=function(){function n(){}return n.value=new n,n}();var m=function(n){return n.map},Qr=function(n){return function(t){return function(r){return m(n)(r)(t)}}},tn=function(n){return m(n)(L(void 0))},Wr=function(n){return function(t){return function(r){return m(n)(L(r))(t)}}};var Ur={map:Ye(ga)},lt={map:as};var Jo={apply:es,Functor0:function(){return lt}},En=function(n){return n.apply};var rn=function(n){return function(t){return function(r){return En(n)(m(n.Functor0())(L(K(j)))(t))(r)}}},hr=function(n){return function(t){return function(r){return function(e){return En(n)(m(n.Functor0())(t)(r))(e)}}}};var D=function(n){return n.pure};var xe=function(n){return function(t){return function(r){if(t)return r;if(!t)return D(n)(void 0);throw new Error("Failed pattern match at Control.Applicative (line 63, column 1 - line 63, column 63): "+[t.constructor.name,r.constructor.name])}}},jo=function(n){return function(t){return function(r){return En(n.Apply0())(D(n)(t))(r)}}};var Go={pure:function(n){return[n]},Apply0:function(){return Jo}};var us=function(n){return function(t){return n+t}},is=function(n){return function(t){return n.length===0?t:t.length===0?n:n.concat(t)}};var kt=function(n){return n.reflectSymbol};var Er=function(n){return function(t){return t[n]}},we=function(n){return function(t){return function(r){var e={};for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a]);return e[n]=t,e}}};var cs={append:function(n){return function(t){return void 0}}},Ae={append:us};var dt={append:is};var F=function(n){return n.append};var z=function(n){return n.alt};var Xd=String.fromCharCode(65535),Qd=String.fromCharCode(0),Yd=Number.POSITIVE_INFINITY,Zd=Number.NEGATIVE_INFINITY;var ls=function(n){return function(t){return function(r){return function(e){return function(a){return e<a?n:e===a?t:r}}}}};var ss=ls;var _s=ls;var ps=function(n){return function(t){return n===t}};var ms=ps;var vs=ps;var Ze={eq:vs};var Xo={eq:ms};var cn=function(n){return n.eq};var un=function(){function n(){}return n.value=new n,n}(),dn=function(){function n(){}return n.value=new n,n}(),vn=function(){function n(){}return n.value=new n,n}();var ds=function(n){return function(t){return n-t|0}};var Ds=function(n){return function(t){return n+t|0}},ys=function(n){return function(t){return n*t|0}},gs=function(n){return function(t){return n+t}},bs=function(n){return function(t){return n*t}};var Qo={add:gs,zero:0,mul:bs,one:1},Sr={add:Ds,zero:0,mul:ys,one:1};var Yr=function(n){return n.mul};var Ot=function(n){return n.add};var kf={sub:ds,Semiring0:function(){return Sr}};var Gt=function(){return{compare:_s(un.value)(vn.value)(dn.value),Eq0:function(){return Ze}}}();var Fr=function(){return{compare:ss(un.value)(vn.value)(dn.value),Eq0:function(){return Xo}}}();var pn=function(n){return n.compare};var Br=function(n){return n.top};var ba={top:2147483647,bottom:-2147483648,Ord0:function(){return Fr}};var Zr=function(n){return n.bottom};var Cs=function(n){return n.toString()},hs=function(n){var t=n.toString();return isNaN(t+".0")?t:t+".0"};var Es=function(n){var t=n.length;return'"'+n.replace(/[\0-\x1F\x7F"\\]/g,function(r,e){switch(r){case'"':case"\\":return"\\"+r;case"\x07":return"\\a";case"\b":return"\\b";case"\f":return"\\f";case`
`:return"\\n";case"\r":return"\\r";case"	":return"\\t";case"\v":return"\\v"}var a=e+1,u=a<t&&n[a]>="0"&&n[a]<="9"?"\\&":"";return"\\"+r.charCodeAt(0).toString(10)+u})+'"'};var Fs=function(n){return function(t){return[n].concat(t)}},Zu=function(n){return function(t){return t.join(n)}};var sr={show:Es},Ms={showRecordFields:function(n){return function(t){return[]}}},xs=function(n){return n.showRecordFields},ws=function(){return function(){return function(n){return{show:function(t){var r=xs(n)(M.value)(t);return r.length===0?"{}":Zu(" ")(["{",Zu(", ")(r),"}"])}}}}};var Zo={show:hs},qr={show:Cs};var N=function(n){return n.show};var Wf=function(n){return function(t){return function(r){return{showRecordFields:function(e){return function(a){var u=xs(t)(M.value)(a),i=kt(n)(M.value),f=Er(i)(a);return Fs(Zu(": ")([i,N(r)(f)]))(u)}}}}}};var y=function(){function n(){}return n.value=new n,n}(),d=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}();var qn=function(n){return function(t){return function(r){if(r instanceof y)return n;if(r instanceof d)return t(r.value0);throw new Error("Failed pattern match at Data.Maybe (line 237, column 1 - line 237, column 51): "+[n.constructor.name,t.constructor.name,r.constructor.name])}}};var Ga=qn(!1)(L(!0));var rt={map:function(n){return function(t){return t instanceof d?new d(n(t.value0)):y.value}}};var or=function(n){return qn(n)(K(j))},Mr=function(){return function(n){if(n instanceof d)return n.value0;throw new Error("Failed pattern match at Data.Maybe (line 288, column 1 - line 288, column 46): "+[n.constructor.name])}};var Ta={apply:function(n){return function(t){if(n instanceof d)return m(rt)(n.value0)(t);if(n instanceof y)return y.value;throw new Error("Failed pattern match at Data.Maybe (line 67, column 1 - line 69, column 30): "+[n.constructor.name,t.constructor.name])}},Functor0:function(){return rt}},xr={bind:function(n){return function(t){if(n instanceof d)return t(n.value0);if(n instanceof y)return y.value;throw new Error("Failed pattern match at Data.Maybe (line 125, column 1 - line 127, column 28): "+[n.constructor.name,t.constructor.name])}},Apply0:function(){return Ta}};var Ut=function(){return{pure:d.create,Apply0:function(){return Ta}}}();var dD={alt:function(n){return function(t){return n instanceof y?t:n}},Functor0:function(){return rt}},Is=function(){return{empty:y.value,Alt0:function(){return dD}}}();var Ss=function(n){return Math.min(Math.abs(n),2147483647)},$s=function(n){return function(t){return t===0?0:t>0?Math.floor(n/t):-Math.floor(n/-t)}},Ps=function(n){return function(t){if(t===0)return 0;var r=Math.abs(t);return(n%r+r)%r}};var Ns={Ring0:function(){return kf}};var Ko=function(n){return n.mod};var ni={degree:Ss,div:$s,mod:Ps,CommutativeRing0:function(){return Ns}};var zr={mempty:void 0,Semigroup0:function(){return cs}},nu={mempty:"",Semigroup0:function(){return Ae}};var bn=function(n){return n.mempty};var Xa=function(n){return{always:L(bn(n)),Monoid0:function(){return n}}},Qa=function(n){return{always:K(j),Monoid0:function(){return n}}},tu=function(n){return n.always};var H=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),R=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}();var Hf=function(n){return qn(new H(n))(R.create)};var Ya={map:function(n){return function(t){if(t instanceof H)return new H(t.value0);if(t instanceof R)return new R(n(t.value0));throw new Error("Failed pattern match at Data.Either (line 31, column 1 - line 31, column 52): "+[t.constructor.name])}}};var Vr=function(n){return function(t){return function(r){if(r instanceof H)return n(r.value0);if(r instanceof R)return t(r.value0);throw new Error("Failed pattern match at Data.Either (line 208, column 1 - line 208, column 64): "+[n.constructor.name,t.constructor.name,r.constructor.name])}}},Bf=function(){return Vr(L(y.value))(d.create)}();var ln=function(n){return n.empty};var ks=function(n){return function(t){return function(r){for(var e=t,a=r.length,u=a-1;u>=0;u--)e=n(r[u])(e);return e}}},Os=function(n){return function(t){return function(r){for(var e=t,a=r.length,u=0;u<a;u++)e=n(e)(r[u]);return e}}};var Ws=function(n){return function(t){for(var r=[],e=0,a=n.length;e<a;e++)Array.prototype.push.apply(r,t(n[e]));return r}};var jn=function(n){return n.discard};var ri={bind:Ws,Apply0:function(){return Jo}},b=function(n){return n.bind},Ie=function(n){return ct(b(n))},ei=function(n){return function(t){return function(r){return function(e){return Ie(n)(t)(r(e))}}}},ai=function(n){return function(t){return function(r){return function(e){return b(n)(t(e))(r)}}}};var Gn={discard:function(n){return b(n)}};var Ca=function(n){return function(t){return b(n)(t)(K(j))}};var MD=function(n,t,r){var e=0,a;return function(u){if(e===2)return a;if(e===1)throw new ReferenceError(n+" was needed before it finished initializing (module "+t+", line "+u+")",t,u);return e=1,a=r(),e=2,a}};var Bs={defer:function(n){return function(t){return n(void 0)(t)}}},Za=function(n){return n.defer},zf=function(n){return function(t){var r=MD("go","Control.Lazy",function(){return Za(n)(function(a){return t(r(25))})}),e=r(25);return e}};var qs=function(n){return function(t){return n&&t}},zs=function(n){return function(t){return n||t}},Vs=function(n){return!n};var Jr=function(n){return n.not};var ru=function(n){return n.ff};var no=function(n){return n.disj},ur={ff:!1,tt:!0,implies:function(n){return function(t){return no(ur)(Jr(ur)(n))(t)}},conj:qs,disj:zs,not:Vs};var C=function(){function n(t,r){this.value0=t,this.value1=r}return n.create=function(t){return function(r){return new n(t,r)}},n}();var Ht=function(n){return n.value1};var ha={map:function(n){return function(t){return new C(t.value0,n(t.value1))}}};var uu=function(n){return n};var kD=function(n){return{append:function(t){return function(r){return no(n)(t)(r)}}}};var Xf=function(n){return{mempty:ru(n),Semigroup0:function(){return kD(n)}}};var OD=function(n){return{append:function(t){return function(r){return Ye(n)(t)(r)}}}};var Fa=function(n){return{mempty:K(n),Semigroup0:function(){return OD(n.Semigroupoid0())}}};var h=function(n){return n};var Ma=function(){return h};var Dt=Ma;var ci=function(){return function(){return function(){return function(){return function(n){return Ma()}}}}};var Xn=function(n){return n.foldr};var eo=function(n){return function(t){return Xn(n)(z(t.Alt0()))(ln(t))}},ft=function(n){return function(t){return function(r){return Xn(n)(function(){var e=z(t.Alt0());return function(a){return e(r(a))}}())(ln(t))}}},ne=function(n){return function(t){return function(r){return Xn(t)(function(){var e=rn(n.Apply0());return function(a){return e(r(a))}}())(D(n)(void 0))}}},ir=function(n){return function(t){return ct(ne(n)(t))}},li=function(n){return function(t){return ne(n)(t)(K(j))}},Qn=function(n){return n.foldl};var Se=function(n){return function(t){return function(r){return function(e){var a=function(u){return function(i){return u.init?{init:!1,acc:i}:{init:!1,acc:F(t.Semigroup0())(u.acc)(F(t.Semigroup0())(r)(i))}}};return Qn(n)(a)({init:!0,acc:bn(t)})(e).acc}}}};var Wt={foldr:function(n){return function(t){return function(r){if(r instanceof y)return t;if(r instanceof d)return n(r.value0)(t);throw new Error("Failed pattern match at Data.Foldable (line 138, column 1 - line 144, column 27): "+[n.constructor.name,t.constructor.name,r.constructor.name])}}},foldl:function(n){return function(t){return function(r){if(r instanceof y)return t;if(r instanceof d)return n(t)(r.value0);throw new Error("Failed pattern match at Data.Foldable (line 138, column 1 - line 144, column 27): "+[n.constructor.name,t.constructor.name,r.constructor.name])}}},foldMap:function(n){return function(t){return function(r){if(r instanceof y)return bn(n);if(r instanceof d)return t(r.value0);throw new Error("Failed pattern match at Data.Foldable (line 138, column 1 - line 144, column 27): "+[t.constructor.name,r.constructor.name])}}}};var Gs=function(n){return function(t){return function(r){return Xn(n)(function(e){return function(a){return F(t.Semigroup0())(r(e))(a)}})(bn(t))}}},en={foldr:ks,foldl:Os,foldMap:function(n){return Gs(en)(n)}};var Lt=function(n){return n.foldMap};var ta=function(n){return function(t){return ci()()()()(uu)(Lt(n)(Xf(t)))}};var Xs=function(n){return function(t){for(var r=t.length,e=Array(r),a=0;a<r;a++)e[a]=n(a)(t[a]);return e}};var ve=function(n){return n};var de={map:function(n){return function(t){return n(t)}}};var Zs={apply:function(n){return function(t){return n(t)}},Functor0:function(){return de}},BD={bind:function(n){return function(t){return t(n)}},Apply0:function(){return Zs}},qD={pure:ve,Apply0:function(){return Zs}},ut={Applicative0:function(){return qD},Bind1:function(){return BD}};var Pe=function(n){return n.mapWithIndex};var oo={mapWithIndex:Xs,Functor0:function(){return lt}};var Ne=function(n){return n.foldrWithIndex};var te=function(n){return n.foldlWithIndex};var Re=function(n){return n.foldMapWithIndex};var o_=function(){function n(a){return[a]}function t(a){return function(u){return[a,u]}}function r(a){return function(u){return function(i){return[a,u,i]}}}function e(a){return function(u){return a.concat(u)}}return function(a){return function(u){return function(i){return function(f){return function(v){function _(c,s){switch(s-c){case 0:return i([]);case 1:return u(n)(f(v[c]));case 2:return a(u(t)(f(v[c])))(f(v[c+1]));case 3:return a(a(u(r)(f(v[c])))(f(v[c+1])))(f(v[c+2]));default:var l=c+Math.floor((s-c)/4)*2;return a(u(e)(_(c,l)))(_(l,s))}}return _(0,v.length)}}}}}}();var _r=function(n){return n.traverse};var f_=function(n){return function(t){return _r(n)(t)(K(j))}},ke={traverse:function(n){return o_(En(n.Apply0()))(m(n.Apply0().Functor0()))(D(n))},sequence:function(n){return f_(ke)(n)},Functor0:function(){return lt},Foldable1:function(){return en}};var ye=function(){function n(t,r){this.value0=t,this.value1=r}return n.create=function(t){return function(r){return new n(t,r)}},n}();var gi=function(n){return function(t){return new ye(t,ln(n))}};var st=function(){function n(){}return n.value=new n,n}(),an=function(){function n(t,r){this.value0=t,this.value1=r}return n.create=function(t){return function(r){return new n(t,r)}},n}(),bi=function(n){return n},Jy=function(n){return new an(n.value0,n.value1)};var jy=function(n){var t=function(r){return function(e){var a=r,u=!1,i;function f(v,_){if(_ instanceof an&&_.value1 instanceof an&&_.value1.value1 instanceof an){a=new an(_,v),e=_.value1.value1.value1;return}var c=function(l){return l instanceof an&&l.value1 instanceof an&&l.value1.value1 instanceof st?new an(n(l.value0),new an(n(l.value1.value0),st.value)):l instanceof an&&l.value1 instanceof st?new an(n(l.value0),st.value):st.value},s=function(l){return function(o){var p=l,S=!1,Cn;function at(Rn,Xr){if(Rn instanceof an&&Rn.value0 instanceof an&&Rn.value0.value1 instanceof an&&Rn.value0.value1.value1 instanceof an){p=Rn.value1,o=new an(n(Rn.value0.value0),new an(n(Rn.value0.value1.value0),new an(n(Rn.value0.value1.value1.value0),Xr)));return}return S=!0,Xr}for(;!S;)Cn=at(p,o);return Cn}};return u=!0,s(v)(c(_))}for(;!u;)i=f(a,e);return i}};return t(st.value)},uc={map:jy};var Oe={foldr:function(n){return function(t){var r=function(){var a=function(u){return function(i){var f=u,v=!1,_;function c(s,l){if(l instanceof st)return v=!0,s;if(l instanceof an){f=new an(l.value0,s),i=l.value1;return}throw new Error("Failed pattern match at Data.List.Types (line 107, column 7 - line 107, column 23): "+[s.constructor.name,l.constructor.name])}for(;!v;)_=c(f,i);return _}};return a(st.value)}(),e=Qn(Oe)(ct(n))(t);return function(a){return e(r(a))}}},foldl:function(n){var t=function(r){return function(e){var a=r,u=!1,i;function f(v,_){if(_ instanceof st)return u=!0,v;if(_ instanceof an){a=n(v)(_.value0),e=_.value1;return}throw new Error("Failed pattern match at Data.List.Types (line 111, column 12 - line 113, column 30): "+[_.constructor.name])}for(;!u;)i=f(a,e);return i}};return t},foldMap:function(n){return function(t){return Qn(Oe)(function(r){var e=F(n.Semigroup0())(r);return function(a){return e(t(a))}})(bn(n))}}};var lu={append:function(n){return function(t){return Xn(Oe)(an.create)(t)(n)}}};var ic={append:function(n){return function(t){return new ye(n.value0,F(lu)(n.value1)(Jy(t)))}}};var __={alt:F(lu),Functor0:function(){return uc}},fc=function(){return{empty:st.value,Alt0:function(){return __}}}();var p_=function(n){return n()};var m_=function(n){throw new Error(n)};var v_=function(){return m_};var Yy=p_,ee=function(n){return Yy(function(){return v_()(n)})};function y_(n){var t={};for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r]);return t}function g_(n){return function(t){return function(r){return r[n]=t(r[n]),r}}}var lc=function(n){return function(t){return function(r){return function(e){return n(t,r,e)}}}};var T_=ga;var C_=function(){return function(){return function(n){return function(t){return function(r){return function(e){return g_(kt(n)(t))(r)(e)}}}}}};var h_=j,E_=function(n){return function(t){return n(y_(t))}};var pg=function(n){return n},mg=function(n){return n.mappingWithIndex};var vg=function(n){return n.mapping};var Ti={mapRecordWithIndexBuilder:function(n){return function(t){return K(h_)}}},F_=function(n){return n.mapRecordWithIndexBuilder},fo=function(n){return function(t){return function(r){return function(){return function(){return{mapRecordWithIndexBuilder:function(e){return function(a){return Ye(T_)(C_()()(n)(M.value)(mg(t)(a)(M.value)))(F_(r)(M.value)(a))}}}}}}}};var M_=function(){return function(n){return{hmap:function(){var t=F_(n)(M.value);return function(r){return E_(t(pg(r)))}}()}}};var x_=function(n){return n.hmap},co=function(n){return{mappingWithIndex:function(t){return function(r){return vg(n)(t)}}}};var dg=function(){function n(){}return n.value=new n,n}(),lo=function(n){return{mapping:function(t){return m(Ur)(tu(n))}}},w_=function(n){return x_(n)(dg.value)};var A_=h;var L_=function(n){return function(t){return function(){return n(t())}}},I_=function(n){return function(){return n}},S_=function(n){return function(t){return function(){return t(n())()}}};function It(n){return function(){return{value:n}}}var Tt=function(n){return function(){return n.value}},$_=function(n){return function(t){return function(){var r=n(t.value);return t.value=r.state,r.value}}},pr=function(n){return function(t){return function(){return t.value=n}}};var jr=function(n){return function(t){return function(r){return b(n.Bind1())(t)(function(e){return b(n.Bind1())(r)(function(a){return D(n.Applicative0())(e(a))})})}}};var mc=function(n){return function(){return n}},P_=function(n){return function(t){return function(){return t(n())()}}};var N_=function(n,t,r){var e=0,a;return function(u){if(e===2)return a;if(e===1)throw new ReferenceError(n+" was needed before it finished initializing (module "+t+", line "+u+")",t,u);return e=1,a=r(),e=2,a}},so={Applicative0:function(){return mr},Bind1:function(){return La}},La={bind:P_,Apply0:function(){return vc(0)}},mr={pure:mc,Apply0:function(){return vc(0)}},R_=N_("functorEffect","Effect",function(){return{map:jo(mr)}}),vc=N_("applyEffect","Effect",function(){return{apply:jr(so),Functor0:function(){return R_(0)}}}),In=R_(20),Yn=vc(23),k_=function(n){return{append:hr(Yn)(F(n))}},oe=function(n){return{mempty:mc(bn(n)),Semigroup0:function(){return k_(n.Semigroup0())}}};var O_=function(n){return function(){return{value:n}}};var _o=function(n){return function(){return n.value}},W_=function(n){return function(t){return function(){var r=n(t.value);return t.value=r.state,r.value}}};var _u=O_,Tg=W_,U_=function(n){return Tg(function(t){var r=n(t);return{state:r,value:r}})};var Mg=function(n,t,r){var e=0,a;return function(u){if(e===2)return a;if(e===1)throw new ReferenceError(n+" was needed before it finished initializing (module "+t+", line "+u+")",t,u);return e=1,a=r(),e=2,a}},xg=$_,Qt=function(n){return xg(function(t){var r=n(t);return{state:r,value:r}})},Ct={map:L_},hi={Applicative0:function(){return fr},Bind1:function(){return Ei}},Ei={bind:S_,Apply0:function(){return Dc(0)}},fr={pure:I_,Apply0:function(){return Dc(0)}},Dc=Mg("applyST","Control.Monad.ST.Internal",function(){return{apply:jr(hi),Functor0:function(){return Ct}}}),B_=Dc(46);var q_={liftST:K(j),Monad0:function(){return hi}},z_={liftST:A_,Monad0:function(){return so}},yn=function(n){return n.liftST};var wg=function(n){return function(t){if(n<1)return[];var r=new Array(n);return r.fill(t)}},Ag=function(n){return function(t){for(var r=[],e=0,a=0;a<n;a++)r[e++]=t;return r}},yc=typeof Array.prototype.fill=="function"?wg:Ag,Lg=function(){function n(a,u){this.head=a,this.tail=u}var t={};function r(a){return function(u){return new n(a,u)}}function e(a){for(var u=[],i=0,f=a;f!==t;)u[i++]=f.head,f=f.tail;return u}return function(a){return function(u){return e(a(r)(t)(u))}}}();var V_=function(n){return function(t){return function(r){return function(e){return e<0||e>=r.length?t:n(r[e])}}}},J_=function(n){return function(t){return function(r){return function(e){for(var a=0;a<e.length;a++){var u=r(e[a]);if(t(u))return u}return n}}}},j_=function(n){return function(t){return function(r){return function(e){for(var a=0,u=e.length;a<u;a++)if(r(e[a]))return n(a);return t}}}};var G_=function(n){return function(t){return function(r){return function(e){if(r<0||r>=e.length)return t;var a=e.slice();return a.splice(r,1),n(a)}}}};var mu=function(n){return function(t){return t.filter(n)}},Mi=function(n){return function(t){for(var r=[],e=[],a=0;a<t.length;a++){var u=t[a];n(u)?r.push(u):e.push(u)}return{yes:r,no:e}}};var Ig=function(){function n(t,r,e,a,u,i){var f,v,_,c,s,l,o;for(f=u+(i-u>>1),f-u>1&&n(t,r,a,e,u,f),i-f>1&&n(t,r,a,e,f,i),v=u,_=f,c=u;v<f&&_<i;)s=a[v],l=a[_],o=r(t(s)(l)),o>0?(e[c++]=l,++_):(e[c++]=s,++v);for(;v<f;)e[c++]=a[v++];for(;_<i;)e[c++]=a[_++]}return function(t){return function(r){return function(e){var a;return e.length<2?e:(a=e.slice(0),n(t,r,a,e.slice(0),0,e.length),a)}}}}();var X_=function(n){return function(t){return n[t]}};function Ia(){return[]}var gc=function(n){return function(t){return function(){return t.push.apply(t,n)}}};var be=function(n){return function(){return n}};function $g(n){return function(){return n.slice()}}var bc=$g,Pg=function(){function n(t,r,e,a,u,i){var f,v,_,c,s,l,o;for(f=u+(i-u>>1),f-u>1&&n(t,r,a,e,u,f),i-f>1&&n(t,r,a,e,f,i),v=u,_=f,c=u;v<f&&_<i;)s=a[v],l=a[_],o=r(t(s)(l)),o>0?(e[c++]=l,++_):(e[c++]=s,++v);for(;v<f;)e[c++]=a[v++];for(;_<i;)e[c++]=a[_++]}return function(t){return function(r){return function(e){return function(){return e.length<2||n(t,r,e,e.slice(0),0,e.length),e}}}}}();var K_=function(n){return function(t){return function(){var e=bc(t)();return n(e)(),be(e)()}}};var We=function(n){return gc([n])};var kg=function(){function n(t,r){this.value0=t,this.value1=r}return n.create=function(t){return function(r){return new n(t,r)}},n}();var Og=function(n){return function(){var r=Tt(n.value1)();return Qt(function(e){return e+1|0})(n.value1)(),n.value0(r)}};var xi=function(n){return m(Ct)(kg.create(n))(It(0))},wi=function(n){return function(t){return function(){for(var e=It(!1)();m(Ct)(Jr(ur))(Tt(e))();)(function(){var u=Og(n)();if(u instanceof d)return t(u.value0)();if(u instanceof y)return tn(Ct)(pr(!0)(e))();throw new Error("Failed pattern match at Data.Array.ST.Iterator (line 42, column 5 - line 44, column 47): "+[u.constructor.name])})();return{}}}};var ap=function(){return X_};var hc=function(n){return function(t){return K_(We(t))(n)()}},op=function(n){return[n]};var po=function(){return V_(d.create)(y.value)}();var Ai=function(){return J_(y.value)(Ga)}();var Ec=function(){return j_(d.create)(y.value)}();var Fc=function(n){return function(t){return m(rt)(ap()(t))(Ec(n)(t))}};var up=function(){return G_(d.create)(y.value)}(),Mc=function(n){return function(t){return function(r){return r.length===0?[]:qn(r)(function(e){return Mr()(up(e)(r))})(Ec(n(t))(r))}}};var Du=function(n){return function(t){return F(dt)([n])(t)}};var zg=ct(b(ri)),xc=function(n){return zg(function(){var t=qn([])(op);return function(r){return t(n(r))}}())};var B=function(){function n(){}return n.value=new n,n}(),on=function(){function n(t,r,e,a){this.value0=t,this.value1=r,this.value2=e,this.value3=a}return n.create=function(t){return function(r){return function(e){return function(a){return new n(t,r,e,a)}}}},n}(),wn=function(){function n(t,r,e,a,u,i,f){this.value0=t,this.value1=r,this.value2=e,this.value3=a,this.value4=u,this.value5=i,this.value6=f}return n.create=function(t){return function(r){return function(e){return function(a){return function(u){return function(i){return function(f){return new n(t,r,e,a,u,i,f)}}}}}}},n}(),aa=function(){function n(t,r,e){this.value0=t,this.value1=r,this.value2=e}return n.create=function(t){return function(r){return function(e){return new n(t,r,e)}}},n}(),Ue=function(){function n(t,r,e){this.value0=t,this.value1=r,this.value2=e}return n.create=function(t){return function(r){return function(e){return new n(t,r,e)}}},n}(),oa=function(){function n(t,r,e,a,u,i){this.value0=t,this.value1=r,this.value2=e,this.value3=a,this.value4=u,this.value5=i}return n.create=function(t){return function(r){return function(e){return function(a){return function(u){return function(i){return new n(t,r,e,a,u,i)}}}}}},n}(),Te=function(){function n(t,r,e,a,u,i){this.value0=t,this.value1=r,this.value2=e,this.value3=a,this.value4=u,this.value5=i}return n.create=function(t){return function(r){return function(e){return function(a){return function(u){return function(i){return new n(t,r,e,a,u,i)}}}}}},n}(),ua=function(){function n(t,r,e,a,u,i){this.value0=t,this.value1=r,this.value2=e,this.value3=a,this.value4=u,this.value5=i}return n.create=function(t){return function(r){return function(e){return function(a){return function(u){return function(i){return new n(t,r,e,a,u,i)}}}}}},n}(),Ii=function(){function n(t,r,e,a){this.value0=t,this.value1=r,this.value2=e,this.value3=a}return n.create=function(t){return function(r){return function(e){return function(a){return new n(t,r,e,a)}}}},n}();var $i=function(n){return function(t){var r=pn(n),e=function(a){var u=!1,i;function f(v){if(v instanceof B)return u=!0,y.value;if(v instanceof on){var _=r(t)(v.value1);if(_ instanceof vn)return u=!0,new d(v.value2);if(_ instanceof un){a=v.value0;return}a=v.value3;return}if(v instanceof wn){var c=r(t)(v.value1);if(c instanceof vn)return u=!0,new d(v.value2);var s=r(t)(v.value4);if(s instanceof vn)return u=!0,new d(v.value5);if(c instanceof un){a=v.value0;return}if(s instanceof dn){a=v.value6;return}a=v.value3;return}throw new Error("Failed pattern match at Data.Map.Internal (line 241, column 5 - line 241, column 22): "+[v.constructor.name])}for(;!u;)i=f(a);return i};return e}};var Et=function(n){return function(t){return function(r){var e=n,a=t,u=!1,i;function f(v,_,c){if(_ instanceof st)return u=!0,c;if(_ instanceof an){if(_.value0 instanceof aa){e=v,a=_.value1,r=new on(c,_.value0.value0,_.value0.value1,_.value0.value2);return}if(_.value0 instanceof Ue){e=v,a=_.value1,r=new on(_.value0.value0,_.value0.value1,_.value0.value2,c);return}if(_.value0 instanceof oa){e=v,a=_.value1,r=new wn(c,_.value0.value0,_.value0.value1,_.value0.value2,_.value0.value3,_.value0.value4,_.value0.value5);return}if(_.value0 instanceof Te){e=v,a=_.value1,r=new wn(_.value0.value0,_.value0.value1,_.value0.value2,c,_.value0.value3,_.value0.value4,_.value0.value5);return}if(_.value0 instanceof ua){e=v,a=_.value1,r=new wn(_.value0.value0,_.value0.value1,_.value0.value2,_.value0.value3,_.value0.value4,_.value0.value5,c);return}throw new Error("Failed pattern match at Data.Map.Internal (line 462, column 3 - line 467, column 88): "+[_.value0.constructor.name])}throw new Error("Failed pattern match at Data.Map.Internal (line 459, column 1 - line 459, column 80): "+[_.constructor.name,c.constructor.name])}for(;!u;)i=f(e,a,r);return i}}},Pi=function(n){return function(t){return function(r){var e=function(i){return function(f){var v=i,_=!1,c;function s(l,o){if(l instanceof st)return _=!0,new on(o.value0,o.value1,o.value2,o.value3);if(l instanceof an){if(l.value0 instanceof aa)return _=!0,Et(n)(l.value1)(new wn(o.value0,o.value1,o.value2,o.value3,l.value0.value0,l.value0.value1,l.value0.value2));if(l.value0 instanceof Ue)return _=!0,Et(n)(l.value1)(new wn(l.value0.value0,l.value0.value1,l.value0.value2,o.value0,o.value1,o.value2,o.value3));if(l.value0 instanceof oa){v=l.value1,f=new Ii(new on(o.value0,o.value1,o.value2,o.value3),l.value0.value0,l.value0.value1,new on(l.value0.value2,l.value0.value3,l.value0.value4,l.value0.value5));return}if(l.value0 instanceof Te){v=l.value1,f=new Ii(new on(l.value0.value0,l.value0.value1,l.value0.value2,o.value0),o.value1,o.value2,new on(o.value3,l.value0.value3,l.value0.value4,l.value0.value5));return}if(l.value0 instanceof ua){v=l.value1,f=new Ii(new on(l.value0.value0,l.value0.value1,l.value0.value2,l.value0.value3),l.value0.value4,l.value0.value5,new on(o.value0,o.value1,o.value2,o.value3));return}throw new Error("Failed pattern match at Data.Map.Internal (line 498, column 5 - line 503, column 108): "+[l.value0.constructor.name,o.constructor.name])}throw new Error("Failed pattern match at Data.Map.Internal (line 495, column 3 - line 495, column 56): "+[l.constructor.name,o.constructor.name])}for(;!_;)c=s(v,f);return c}},a=pn(n),u=function(i){return function(f){var v=i,_=!1,c;function s(l,o){if(o instanceof B)return _=!0,e(l)(new Ii(B.value,t,r,B.value));if(o instanceof on){var p=a(t)(o.value1);if(p instanceof vn)return _=!0,Et(n)(l)(new on(o.value0,t,r,o.value3));if(p instanceof un){v=new an(new aa(o.value1,o.value2,o.value3),l),f=o.value0;return}v=new an(new Ue(o.value0,o.value1,o.value2),l),f=o.value3;return}if(o instanceof wn){var S=a(t)(o.value1);if(S instanceof vn)return _=!0,Et(n)(l)(new wn(o.value0,t,r,o.value3,o.value4,o.value5,o.value6));var Cn=a(t)(o.value4);if(Cn instanceof vn)return _=!0,Et(n)(l)(new wn(o.value0,o.value1,o.value2,o.value3,t,r,o.value6));if(S instanceof un){v=new an(new oa(o.value1,o.value2,o.value3,o.value4,o.value5,o.value6),l),f=o.value0;return}if(S instanceof dn&&Cn instanceof un){v=new an(new Te(o.value0,o.value1,o.value2,o.value4,o.value5,o.value6),l),f=o.value3;return}v=new an(new ua(o.value0,o.value1,o.value2,o.value3,o.value4,o.value5),l),f=o.value6;return}throw new Error("Failed pattern match at Data.Map.Internal (line 478, column 3 - line 478, column 55): "+[l.constructor.name,o.constructor.name])}for(;!_;)c=s(v,f);return c}};return u(st.value)}}},lb=function(n){return function(t){var r=function(f){return function(v){var _=f,c=!1,s;function l(o,p){if(o instanceof st)return c=!0,p;if(o instanceof an){if(o.value0 instanceof aa&&o.value0.value2 instanceof B&&p instanceof B)return c=!0,Et(n)(o.value1)(new on(B.value,o.value0.value0,o.value0.value1,B.value));if(o.value0 instanceof Ue&&o.value0.value0 instanceof B&&p instanceof B)return c=!0,Et(n)(o.value1)(new on(B.value,o.value0.value1,o.value0.value2,B.value));if(o.value0 instanceof aa&&o.value0.value2 instanceof on){_=o.value1,v=new wn(p,o.value0.value0,o.value0.value1,o.value0.value2.value0,o.value0.value2.value1,o.value0.value2.value2,o.value0.value2.value3);return}if(o.value0 instanceof Ue&&o.value0.value0 instanceof on){_=o.value1,v=new wn(o.value0.value0.value0,o.value0.value0.value1,o.value0.value0.value2,o.value0.value0.value3,o.value0.value1,o.value0.value2,p);return}return o.value0 instanceof aa&&o.value0.value2 instanceof wn?(c=!0,Et(n)(o.value1)(new on(new on(p,o.value0.value0,o.value0.value1,o.value0.value2.value0),o.value0.value2.value1,o.value0.value2.value2,new on(o.value0.value2.value3,o.value0.value2.value4,o.value0.value2.value5,o.value0.value2.value6)))):o.value0 instanceof Ue&&o.value0.value0 instanceof wn?(c=!0,Et(n)(o.value1)(new on(new on(o.value0.value0.value0,o.value0.value0.value1,o.value0.value0.value2,o.value0.value0.value3),o.value0.value0.value4,o.value0.value0.value5,new on(o.value0.value0.value6,o.value0.value1,o.value0.value2,p)))):o.value0 instanceof oa&&o.value0.value2 instanceof B&&o.value0.value5 instanceof B&&p instanceof B?(c=!0,Et(n)(o.value1)(new wn(B.value,o.value0.value0,o.value0.value1,B.value,o.value0.value3,o.value0.value4,B.value))):o.value0 instanceof Te&&o.value0.value0 instanceof B&&o.value0.value5 instanceof B&&p instanceof B?(c=!0,Et(n)(o.value1)(new wn(B.value,o.value0.value1,o.value0.value2,B.value,o.value0.value3,o.value0.value4,B.value))):o.value0 instanceof ua&&o.value0.value0 instanceof B&&o.value0.value3 instanceof B&&p instanceof B?(c=!0,Et(n)(o.value1)(new wn(B.value,o.value0.value1,o.value0.value2,B.value,o.value0.value4,o.value0.value5,B.value))):o.value0 instanceof oa&&o.value0.value2 instanceof on?(c=!0,Et(n)(o.value1)(new on(new wn(p,o.value0.value0,o.value0.value1,o.value0.value2.value0,o.value0.value2.value1,o.value0.value2.value2,o.value0.value2.value3),o.value0.value3,o.value0.value4,o.value0.value5))):o.value0 instanceof Te&&o.value0.value0 instanceof on?(c=!0,Et(n)(o.value1)(new on(new wn(o.value0.value0.value0,o.value0.value0.value1,o.value0.value0.value2,o.value0.value0.value3,o.value0.value1,o.value0.value2,p),o.value0.value3,o.value0.value4,o.value0.value5))):o.value0 instanceof Te&&o.value0.value5 instanceof on?(c=!0,Et(n)(o.value1)(new on(o.value0.value0,o.value0.value1,o.value0.value2,new wn(p,o.value0.value3,o.value0.value4,o.value0.value5.value0,o.value0.value5.value1,o.value0.value5.value2,o.value0.value5.value3)))):o.value0 instanceof ua&&o.value0.value3 instanceof on?(c=!0,Et(n)(o.value1)(new on(o.value0.value0,o.value0.value1,o.value0.value2,new wn(o.value0.value3.value0,o.value0.value3.value1,o.value0.value3.value2,o.value0.value3.value3,o.value0.value4,o.value0.value5,p)))):o.value0 instanceof oa&&o.value0.value2 instanceof wn?(c=!0,Et(n)(o.value1)(new wn(new on(p,o.value0.value0,o.value0.value1,o.value0.value2.value0),o.value0.value2.value1,o.value0.value2.value2,new on(o.value0.value2.value3,o.value0.value2.value4,o.value0.value2.value5,o.value0.value2.value6),o.value0.value3,o.value0.value4,o.value0.value5))):o.value0 instanceof Te&&o.value0.value0 instanceof wn?(c=!0,Et(n)(o.value1)(new wn(new on(o.value0.value0.value0,o.value0.value0.value1,o.value0.value0.value2,o.value0.value0.value3),o.value0.value0.value4,o.value0.value0.value5,new on(o.value0.value0.value6,o.value0.value1,o.value0.value2,p),o.value0.value3,o.value0.value4,o.value0.value5))):o.value0 instanceof Te&&o.value0.value5 instanceof wn?(c=!0,Et(n)(o.value1)(new wn(o.value0.value0,o.value0.value1,o.value0.value2,new on(p,o.value0.value3,o.value0.value4,o.value0.value5.value0),o.value0.value5.value1,o.value0.value5.value2,new on(o.value0.value5.value3,o.value0.value5.value4,o.value0.value5.value5,o.value0.value5.value6)))):o.value0 instanceof ua&&o.value0.value3 instanceof wn?(c=!0,Et(n)(o.value1)(new wn(o.value0.value0,o.value0.value1,o.value0.value2,new on(o.value0.value3.value0,o.value0.value3.value1,o.value0.value3.value2,o.value0.value3.value3),o.value0.value3.value4,o.value0.value3.value5,new on(o.value0.value3.value6,o.value0.value4,o.value0.value5,p)))):(c=!0,ee("The impossible happened in partial function `up`."))}throw new Error("Failed pattern match at Data.Map.Internal (line 552, column 5 - line 573, column 86): "+[o.constructor.name])}for(;!c;)s=l(_,v);return s}},e=function(f){return function(v){var _=f,c=!1,s;function l(o,p){if(p instanceof on&&p.value0 instanceof B&&p.value3 instanceof B)return c=!0,r(o)(B.value);if(p instanceof on){_=new an(new Ue(p.value0,p.value1,p.value2),o),v=p.value3;return}if(p instanceof wn&&p.value0 instanceof B&&p.value3 instanceof B&&p.value6 instanceof B)return c=!0,r(new an(new Ue(B.value,p.value1,p.value2),o))(B.value);if(p instanceof wn){_=new an(new ua(p.value0,p.value1,p.value2,p.value3,p.value4,p.value5),o),v=p.value6;return}return c=!0,ee("The impossible happened in partial function `removeMaxNode`.")}for(;!c;)s=l(_,v);return s}},a=function(f){var v=!1,_;function c(s){if(s instanceof on&&s.value3 instanceof B)return v=!0,{key:s.value1,value:s.value2};if(s instanceof on){f=s.value3;return}if(s instanceof wn&&s.value6 instanceof B)return v=!0,{key:s.value4,value:s.value5};if(s instanceof wn){f=s.value6;return}return v=!0,ee("The impossible happened in partial function `maxNode`.")}for(;!v;)_=c(f);return _},u=pn(n),i=function(f){return function(v){var _=f,c=!1,s;function l(o,p){if(p instanceof B)return c=!0,y.value;if(p instanceof on){var S=u(t)(p.value1);if(p.value3 instanceof B&&S instanceof vn)return c=!0,new d(new C(p.value2,r(o)(B.value)));if(S instanceof vn){var Cn=a(p.value0);return c=!0,new d(new C(p.value2,e(new an(new aa(Cn.key,Cn.value,p.value3),o))(p.value0)))}if(S instanceof un){_=new an(new aa(p.value1,p.value2,p.value3),o),v=p.value0;return}_=new an(new Ue(p.value0,p.value1,p.value2),o),v=p.value3;return}if(p instanceof wn){var at=function(){return p.value0 instanceof B&&p.value3 instanceof B&&p.value6 instanceof B}(),S=u(t)(p.value4),Rn=u(t)(p.value1);if(at&&Rn instanceof vn)return c=!0,new d(new C(p.value2,Et(n)(o)(new on(B.value,p.value4,p.value5,B.value))));if(at&&S instanceof vn)return c=!0,new d(new C(p.value5,Et(n)(o)(new on(B.value,p.value1,p.value2,B.value))));if(Rn instanceof vn){var Cn=a(p.value0);return c=!0,new d(new C(p.value2,e(new an(new oa(Cn.key,Cn.value,p.value3,p.value4,p.value5,p.value6),o))(p.value0)))}if(S instanceof vn){var Cn=a(p.value3);return c=!0,new d(new C(p.value5,e(new an(new Te(p.value0,p.value1,p.value2,Cn.key,Cn.value,p.value6),o))(p.value3)))}if(Rn instanceof un){_=new an(new oa(p.value1,p.value2,p.value3,p.value4,p.value5,p.value6),o),v=p.value0;return}if(Rn instanceof dn&&S instanceof un){_=new an(new Te(p.value0,p.value1,p.value2,p.value4,p.value5,p.value6),o),v=p.value3;return}_=new an(new ua(p.value0,p.value1,p.value2,p.value3,p.value4,p.value5),o),v=p.value6;return}throw new Error("Failed pattern match at Data.Map.Internal (line 525, column 16 - line 548, column 80): "+[p.constructor.name])}for(;!c;)s=l(_,v);return s}};return i(st.value)}},cr={foldr:function(n){return function(t){return function(r){if(r instanceof B)return t;if(r instanceof on)return Xn(cr)(n)(n(r.value2)(Xn(cr)(n)(t)(r.value3)))(r.value0);if(r instanceof wn)return Xn(cr)(n)(n(r.value2)(Xn(cr)(n)(n(r.value5)(Xn(cr)(n)(t)(r.value6)))(r.value3)))(r.value0);throw new Error("Failed pattern match at Data.Map.Internal (line 133, column 17 - line 136, column 85): "+[r.constructor.name])}}},foldl:function(n){return function(t){return function(r){if(r instanceof B)return t;if(r instanceof on)return Qn(cr)(n)(n(Qn(cr)(n)(t)(r.value0))(r.value2))(r.value3);if(r instanceof wn)return Qn(cr)(n)(n(Qn(cr)(n)(n(Qn(cr)(n)(t)(r.value0))(r.value2))(r.value3))(r.value5))(r.value6);throw new Error("Failed pattern match at Data.Map.Internal (line 137, column 17 - line 140, column 85): "+[r.constructor.name])}}},foldMap:function(n){return function(t){return function(r){if(r instanceof B)return bn(n);if(r instanceof on)return F(n.Semigroup0())(Lt(cr)(n)(t)(r.value0))(F(n.Semigroup0())(t(r.value2))(Lt(cr)(n)(t)(r.value3)));if(r instanceof wn)return F(n.Semigroup0())(Lt(cr)(n)(t)(r.value0))(F(n.Semigroup0())(t(r.value2))(F(n.Semigroup0())(Lt(cr)(n)(t)(r.value3))(F(n.Semigroup0())(t(r.value5))(Lt(cr)(n)(t)(r.value6)))));throw new Error("Failed pattern match at Data.Map.Internal (line 141, column 17 - line 144, column 93): "+[r.constructor.name])}}}},tr={foldrWithIndex:function(n){return function(t){return function(r){if(r instanceof B)return t;if(r instanceof on)return Ne(tr)(n)(n(r.value1)(r.value2)(Ne(tr)(n)(t)(r.value3)))(r.value0);if(r instanceof wn)return Ne(tr)(n)(n(r.value1)(r.value2)(Ne(tr)(n)(n(r.value4)(r.value5)(Ne(tr)(n)(t)(r.value6)))(r.value3)))(r.value0);throw new Error("Failed pattern match at Data.Map.Internal (line 147, column 26 - line 150, column 120): "+[r.constructor.name])}}},foldlWithIndex:function(n){return function(t){return function(r){if(r instanceof B)return t;if(r instanceof on)return te(tr)(n)(n(r.value1)(te(tr)(n)(t)(r.value0))(r.value2))(r.value3);if(r instanceof wn)return te(tr)(n)(n(r.value4)(te(tr)(n)(n(r.value1)(te(tr)(n)(t)(r.value0))(r.value2))(r.value3))(r.value5))(r.value6);throw new Error("Failed pattern match at Data.Map.Internal (line 151, column 26 - line 154, column 120): "+[r.constructor.name])}}},foldMapWithIndex:function(n){return function(t){return function(r){if(r instanceof B)return bn(n);if(r instanceof on)return F(n.Semigroup0())(Re(tr)(n)(t)(r.value0))(F(n.Semigroup0())(t(r.value1)(r.value2))(Re(tr)(n)(t)(r.value3)));if(r instanceof wn)return F(n.Semigroup0())(Re(tr)(n)(t)(r.value0))(F(n.Semigroup0())(t(r.value1)(r.value2))(F(n.Semigroup0())(Re(tr)(n)(t)(r.value3))(F(n.Semigroup0())(t(r.value4)(r.value5))(Re(tr)(n)(t)(r.value6)))));throw new Error("Failed pattern match at Data.Map.Internal (line 155, column 26 - line 158, column 128): "+[r.constructor.name])}}},Foldable0:function(){return cr}};var vo=function(){return B.value}();var mp=function(n){return function(t){return function(r){return qn(r)(Ht)(lb(n)(t)(r))}}};var Do=function(n){return function(t){return function(r){return function(e){var a=t($i(n)(r)(e));if(a instanceof y)return mp(n)(r)(e);if(a instanceof d)return Pi(n)(r)(a.value0)(e);throw new Error("Failed pattern match at Data.Map.Internal (line 596, column 15 - line 598, column 25): "+[a.constructor.name])}}}};var vp={compact:function(n){return function(){var r=Ia(),e=xi(function(a){return po(n)(a)})();return wi(e)(function(){var a=tn(Ct);return function(u){return a(function(i){if(i instanceof y)return D(fr)(0);if(i instanceof d)return We(i.value0)(r);throw new Error("Failed pattern match at Data.Compactable (line 111, column 34 - line 113, column 35): "+[i.constructor.name])}(u))}}())(),be(r)()}()},separate:function(n){return function(){var r=Ia(),e=Ia(),a=xi(function(u){return po(n)(u)})();return wi(a)(function(){var u=tn(Ct);return function(i){return u(function(f){if(f instanceof H)return We(f.value0)(r);if(f instanceof R)return We(f.value0)(e);throw new Error("Failed pattern match at Data.Compactable (line 122, column 34 - line 124, column 31): "+[f.constructor.name])}(i))}}())(),En(B_)(m(Ct)(function(u){return function(i){return{left:u,right:i}}})(be(r)))(be(e))()}()}};var $a=function(n){return n.compact};var dp={partitionMap:function(n){var t=function(r){return function(e){var a=n(e);if(a instanceof H)return{left:F(dt)(r.left)([a.value0]),right:r.right};if(a instanceof R)return{right:F(dt)(r.right)([a.value0]),left:r.left};throw new Error("Failed pattern match at Data.Filterable (line 149, column 16 - line 151, column 50): "+[a.constructor.name])}};return Qn(en)(t)({left:[],right:[]})},partition:Mi,filterMap:xc,filter:mu,Compactable0:function(){return vp},Functor1:function(){return lt}};var vr=function(n){return n.filterMap};var Dp=function(n){return n.filter};var dr={dimap:function(n){return function(t){return function(r){return function(e){return t(r(n(e)))}}}}},yp=function(n){return n.dimap},Ar=function(n){return function(t){return yp(n)(t)(K(j))}};var go=function(n){return n.keepLatest},fa=function(n){return n.fold};var Pa=function(n){return function(t){return function(r){return function(e){return vr(n.Filterable1())(Ht)(fa(n)(function(a){return function(u){return m(ha)(D(Ut))(t(a)(u.value0))}})(r)(new C(e,y.value)))}}}};var ca=function(n){return n.bang};function Ic(n){return function(t){return n===t}}var bp=Ic;var Eb=function(n){return n};var Yt=function(n){return function(t){return n(t)}},Fb=function(n){return function(t){return function(r){return function(e){return function(a){return b(n.Monad0().Bind1())(yn(n)(It(y.value)))(function(u){return b(n.Monad0().Bind1())(r(function(i){return yn(n)(tn(Ct)(pr(new d(i))(u)))}))(function(i){return b(n.Monad0().Bind1())(e(function(f){return b(n.Monad0().Bind1())(yn(n)(Tt(u)))(ne(t)(Wt)(function(v){return a(f(v))}))}))(function(f){return D(t)(rn(t.Apply0())(i)(f))})})})}}}}},Dr=Eb,Mb=function(n){return function(t){return function(r){return b(n.Monad0().Bind1())(yn(n)(It(y.value)))(function(e){return b(n.Monad0().Bind1())(t(function(a){return jn(Gn)(n.Monad0().Bind1())(b(n.Monad0().Bind1())(yn(n)(Tt(e)))(li(n.Monad0().Applicative0())(Wt)))(function(){return b(n.Monad0().Bind1())(Yt(a)(r))(function(u){return yn(n)(tn(Ct)(pr(new d(u))(e)))})})}))(function(a){return D(n.Monad0().Applicative0())(jn(Gn)(n.Monad0().Bind1())(b(n.Monad0().Bind1())(yn(n)(Tt(e)))(li(n.Monad0().Applicative0())(Wt)))(function(){return a}))})})}}},Kn={map:function(n){return function(t){return function(r){return t(function(e){return r(n(e))})}}}};var xb=function(n){return function(t){return function(r){return function(e){return function(a){return b(n.Monad0().Bind1())(yn(n)(It(e)))(function(u){return r(function(i){return b(n.Monad0().Bind1())(yn(n)(Qt(t(i))(u)))(a)})})}}}}},gu=function(n){return function(t){return function(r){return function(e){return r(function(a){var u=t(a);if(u instanceof d)return e(u.value0);if(u instanceof y)return D(n)(void 0);throw new Error("Failed pattern match at FRP.Event (line 126, column 13 - line 128, column 27): "+[u.constructor.name])})}}}},Sc=function(n){return function(t){return gu(n)(function(r){var e=t(r);if(e)return new d(r);if(!e)return y.value;throw new Error("Failed pattern match at FRP.Event (line 84, column 13 - line 86, column 25): "+[e.constructor.name])})}};var $c=function(n){return function(t){return b(n.Monad0().Bind1())(yn(n)(It([])))(function(r){return D(n.Monad0().Applicative0())({event:function(e){return b(t.Monad0().Bind1())(yn(t)(Qt(function(a){return F(dt)(a)([e])})(r)))(function(){return D(t.Monad0().Applicative0())(b(t.Monad0().Bind1())(yn(t)(Qt(Mc(bp)(e))(r)))(function(){return D(t.Monad0().Applicative0())(void 0)}))})},push:function(e){return b(t.Monad0().Bind1())(yn(t)(Tt(r)))(ne(t.Monad0().Applicative0())(en)(function(a){return a(e)}))}})})}},wb=function(n){return function(t){return function(r){return function(e){return b(t.Bind1())($c(n)(n))(function(a){var u=r(a.event);return b(t.Bind1())(Yt(u.input)(a.push))(function(i){return b(t.Bind1())(Yt(u.output)(e))(function(f){return D(t.Applicative0())(rn(t.Bind1().Apply0())(i)(f))})})})}}}},Tp=function(n){return function(t){return function(r){return Dr(function(e){return b(n.Monad0().Bind1())($c(n)(n))(function(a){return jn(Gn)(n.Monad0().Bind1())(e(r(a.event)))(function(){return Yt(t)(a.push)})})})}}},bu=function(n){return{compact:gu(n)(K(j)),separate:function(t){return{left:gu(n)(function(r){if(r instanceof H)return new d(r.value0);if(r instanceof R)return y.value;throw new Error("Failed pattern match at FRP.Event (line 67, column 13 - line 69, column 33): "+[r.constructor.name])})(t),right:gu(n)(function(r){if(r instanceof R)return new d(r.value0);if(r instanceof H)return y.value;throw new Error("Failed pattern match at FRP.Event (line 74, column 13 - line 76, column 32): "+[r.constructor.name])})(t)}}}},le=function(n){return{filter:Sc(n),filterMap:gu(n),partition:function(t){return function(r){return{yes:Sc(n)(t)(r),no:Sc(n)(function(){var e=Jr(ur);return function(a){return e(t(a))}}())(r)}}},partitionMap:function(t){return function(r){return{left:vr(le(n))(function(){var e=Vr(d.create)(L(y.value));return function(a){return e(t(a))}}())(r),right:vr(le(n))(function(e){return Bf(t(e))})(r)}}},Compactable0:function(){return bu(n)},Functor1:function(){return Kn}}},Pc=function(n){return function(t){return Dr(function(r){return b(n.Monad0().Bind1())($c(n)(n))(function(e){return jn(Gn)(n.Monad0().Bind1())(r(t(e.push)(e.event)))(function(){return D(n.Monad0().Applicative0())(D(n.Monad0().Applicative0())(void 0))})})})}},$=function(n){return function(t){return function(r){return m(n.Apply0().Functor0())(function(e){return D(n)(void 0)})(r(t))}}},$n=function(n){return{alt:function(t){return function(r){return function(e){return En(n.Apply0())(m(n.Apply0().Functor0())(function(a){return function(u){return rn(n.Apply0())(a)(u)}})(t(e)))(r(e))}}},Functor0:function(){return Kn}}},k=function(n){return{empty:function(t){return D(n)(D(n)(void 0))},Alt0:function(){return $n(n)}}},Ft=function(n){return{fold:xb(n),keepLatest:Mb(n),sampleOn:Fb(n)(n.Monad0().Applicative0()),fix:wb(n)(n.Monad0()),bang:$(n.Monad0().Applicative0()),Plus0:function(){return k(n.Monad0().Applicative0())},Filterable1:function(){return le(n.Monad0().Applicative0())}}};var Cp="_____$__$_$$_vbus";function Nc(n){return()=>{for(let t in n)delete n[t]}}function Rc(n){return()=>{let t=(u,i,f,v)=>{let _=Object.keys(v);for(var c=0;c<_.length;c++)if(v[_[c]]instanceof Object&&v[_[c]][Cp]===Cp){let s={},l={};t(u,s,l,v[_[c]]),i[_[c]]=s,f[_[c]]=l}else{let s=`${Math.random()}`;u[s]={},i[_[c]]=l=>()=>{let o=Object.keys(u[s]);for(var p=0;p<o.length;p++)u[s][o[p]](l)()},f[_[c]]=l=>()=>{let o=`${Math.random()}`;return u[s][o]=l,()=>{delete u[s][o]}}}},r={},e={},a={};return t(r,e,a,n),{p:e,e:a,s:r}}}var kc=function(n){return function(){return function(){return function(t){return function(r){return function(e){return we(kt(n)(t))(r)(e)}}}}}},Oc=function(n){return function(){return function(t){return function(r){return Er(kt(n)(t))(r)}}}};var ki={vb:function(n){return function(t){return function(r){return{}}}}},hp=function(n){return n.vb},Uc=function(){return function(n){return function(t){return function(r){return function(e){var a=hp(t)(M.value)(M.value)(M.value);return Dr(function(u){return b(n.Monad0().Bind1())(Rc(a))(function(i){return jn(Gn)(n.Monad0().Bind1())(u(e(i.p)(i.e)))(function(){return D(n.Monad0().Applicative0())(Nc(i.s))})})})}}}}};var bo=function(n){return function(){return function(){return function(t){return function(){return function(){return function(){return function(){return{vb:function(r){return function(e){return function(a){return kc(n)()()(M.value)(void 0)(hp(t)(M.value)(M.value)(M.value))}}}}}}}}}}}};var la=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),Hc=function(){function n(){}return n.value=new n,n}();var Tu=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),Cu=function(){function n(){}return n.value=new n,n}(),Wi=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),Ui=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),Hi=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),To=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),Tn=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}();var Na={eq:function(n){return function(t){return n instanceof la&&t instanceof la?n.value0===t.value0:n instanceof Hc&&t instanceof Hc}}};var it=function(n){return new Hi(n)};var Ra=function(n){return new Ui(n)};var Bi={Always0:function(){return Xa(oe(zr))},Always1:function(){return Xa(oe(oe(zr)))},Always2:function(){return Xa(oe(zr))},Always3:function(){return Xa(Fa(j))},Always4:function(){return Xa(Fa(j))},MonadST5:function(){return q_}},qi={Always0:function(){return Qa(oe(zr))},Always1:function(){return Qa(oe(oe(zr)))},Always2:function(){return Qa(oe(zr))},Always3:function(){return Qa(Fa(j))},Always4:function(){return Qa(Fa(j))},MonadST5:function(){return z_}},zi=function(){return function(n){return function(){return function(t){return function(r){return function(e){return function(a){return new To(Uc()(n.MonadST5())(r)(e)(Ar(dr)(w_(M_()(t)))(a)))}}}}}}},Ep=function(){return new Wi(void 0)}(),Fp=function(){return Cu.value}(),Co=function(){return Tu.create}(),ka=function(n){return function(t){return function(r){return Pc(n.MonadST5())(Ar(dr)(m(Ur)(tu(t)))(r))}}},ho=function(n){return function(t){return function(r){return new To(ka(n)(t)(r))}}};function Mp(n){return()=>n.slice()}function xp(n){return t=>r=>()=>{r[n]=t}}function wp(n){return()=>n.slice()}var Ce=function(n){return n.reflectType};var Eo=lt;var kb=function(n){return Ce(n)},Vi=function(){return function(n){return n}};var Bc=function(){return function(){return function(){return function(){return function(){return function(n){return function(t){return function(r){return r[kb(n)(t)]}}}}}}}};var Lp=[];var qc=function(){return function(){return function(n){return function(t){return Du(n)(t)}}}};function Ip(n){return function(){var t={};for(var r in n)hasOwnProperty.call(n,r)&&(t[r]=n[r]);return t}}var sa={};function Vc(n){return n()}function Sp(n){return function(t){return function(r){return function(e){var a=r;function u(f){return function(v){return t(v)(f)(e[f])}}for(var i in e)hasOwnProperty.call(e,i)&&(a=n(a)(u(i)));return a}}}}function Ji(n){return function(t){var r=[];for(var e in t)hasOwnProperty.call(t,e)&&r.push(n(e)(t[e]));return r}}var Ob=Object.keys||Ji(function(n){return function(){return n}});function Jc(n){return function(t){return function(r){return function(){return r[n]=t,r}}}}var jc=function(n){return function(t){return function(){return delete t[n],t}}};var Jb=Ji(function(n){return function(t){return t}});var jb=Ip;var $p=function(n){return function(t){return Vc(function(){var e=jb(t)();return n(e)(),e})}};var Fo=function(n){return function(t){return $p(Jc(n)(t))}};var Pp=Sp(Nf),Gb=function(n){return function(t){return Pp(function(r){return function(e){return function(a){return F(n.Semigroup0())(r)(t(e)(a))}}})(bn(n))}},Np={foldl:function(n){return Pp(function(t){return function(r){return n(t)}})},foldr:function(n){return function(t){return function(r){return Xn(en)(n)(t)(Jb(r))}}},foldMap:function(n){return function(t){return Gb(n)(L(t))}}};var Gc=function(n){return $p(jc(n))};var Rp=function(){function n(){}return n.value=new n,n}(),Qc=function(){function n(){}return n.value=new n,n}(),Xb=function(){function n(){}return n.value=new n,n}();var hu=function(n){return function(t){return function(r){var e=function(a){var u=function(i){return function(f){return new C(f+1|0,new C(i,f))}};return Pa(Ft(n))(u)(a)(0)};return new Ui(go(Ft(n))(Tp(n)(e(r))(function(a){return m(Kn)(function(u){return z($n(n.Monad0().Applicative0()))(ca(Ft(n))(new Tu(t(u.value0))))(m(Kn)(L(Cu.value))(Dp(le(n.Monad0().Applicative0()))(function(){var i=cn(Xo)(u.value1+1|0);return function(f){return i(Ht(f))}}())(a)))})(a)})))}}},he=function(n){return function(t){return function(r){return function(e){return function(a){var u=function(i){return i(e)(a)};return function(i){if(i instanceof Hi)return ft(en)(k(n))(he(n)(t)(r)(e)(a))(i.value0);if(i instanceof To)return go(Ft(t))(m(Kn)(he(n)(t)(r)(e)(a))(i.value0));if(i instanceof Tn)return u(r.toElt(i.value0));if(i instanceof Ui)return Dr(function(f){return b(t.Monad0().Bind1())(yn(t)(It(sa)))(function(v){return b(t.Monad0().Bind1())(Yt(i.value0)(function(_){return b(t.Monad0().Bind1())(r.ids(a))(function(c){return b(t.Monad0().Bind1())(yn(t)(It(D(n)(void 0))))(function(s){return b(t.Monad0().Bind1())(r.ids(a))(function(l){return b(t.Monad0().Bind1())(yn(t)(It(D(n)(void 0))))(function(o){return b(t.Monad0().Bind1())(yn(t)(It(y.value)))(function(p){return b(t.Monad0().Bind1())(yn(t)(It(D(n)(void 0))))(function(S){return b(t.Monad0().Bind1())(m(n.Apply0().Functor0())(la.create)(r.ids(a)))(function(Cn){return b(t.Monad0().Bind1())(yn(t)(It(Rp.value)))(function(at){return b(t.Monad0().Bind1())(Yt(_)(function(Rn){return b(t.Monad0().Bind1())(yn(t)(Tt(at)))(function(Xr){return Rn instanceof Wi&&Xr instanceof Qc?b(t.Monad0().Bind1())(yn(t)(Tt(p)))(ne(n)(Wt)(function(){var br=r.doLogic(Rn.value0)(a);return function(q){return f(br(q))}}())):Rn instanceof Cu&&Xr instanceof Qc?jn(Gn)(t.Monad0().Bind1())(tn(n.Apply0().Functor0())(yn(t)(pr(Xb.value)(at))))(function(){var br=rn(n.Apply0())(rn(n.Apply0())(rn(n.Apply0())(rn(n.Apply0())(b(t.Monad0().Bind1())(yn(t)(Tt(p)))(ne(n)(Wt)(function(q){return ir(n)(Wt)(e.parent)(function(rr){return f(r.disconnectElement(a)({id:q,parent:rr,scope:Cn}))})})))(Ca(t.Monad0().Bind1())(yn(t)(Tt(s)))))(Ca(t.Monad0().Bind1())(yn(t)(Tt(o)))))(tn(n.Apply0().Functor0())(yn(t)(Qt(Gc(c))(v)))))(tn(n.Apply0().Functor0())(yn(t)(Qt(Gc(l))(v))));return rn(n.Apply0())(tn(n.Apply0().Functor0())(yn(t)(pr(br)(S))))(br)}):Rn instanceof Tu&&Xr instanceof Rp?jn(Gn)(t.Monad0().Bind1())(tn(n.Apply0().Functor0())(yn(t)(pr(Qc.value)(at))))(function(){return b(t.Monad0().Bind1())(Yt(he(n)(t)(r)({parent:e.parent,scope:Cn,raiseId:function(br){return tn(n.Apply0().Functor0())(yn(t)(pr(new d(br))(p)))}})(a)(function(){return Rn.value0 instanceof Tn?Rn.value0:r.wrapElt(Rn.value0)}()))(f))(function(br){return jn(Gn)(t.Monad0().Bind1())(tn(n.Apply0().Functor0())(yn(t)(Qt(Fo(l)(br))(v))))(function(){return tn(n.Apply0().Functor0())(yn(t)(pr(br)(o)))})})}):D(n)(void 0)})}))(function(Rn){return jn(Gn)(t.Monad0().Bind1())(tn(n.Apply0().Functor0())(yn(t)(pr(Rn)(s))))(function(){return jn(Gn)(t.Monad0().Bind1())(tn(n.Apply0().Functor0())(yn(t)(Qt(Fo(c)(Rn))(v))))(function(){return Ca(t.Monad0().Bind1())(yn(t)(Tt(S)))})})})})})})})})})})})}))(function(_){return D(n)(jn(Gn)(t.Monad0().Bind1())(b(t.Monad0().Bind1())(yn(t)(Tt(v)))(Qn(Np)(rn(n.Apply0()))(D(n)(void 0))))(function(){return _}))})})});throw new Error("Failed pattern match at Bolson.Control (line 209, column 17 - line 294, column 20): "+[i.constructor.name])}}}}}};var Qb=h,Yb=function(){return function(n){return function(t){return function(r){return function(e){return function(a){return function(u){return function(i){var f=function(v){return function(_){return Dr(function(c){return b(n.Monad0().Bind1())(Mp(m(lt)(L(""))(Vi()(u))))(function(s){var l=eo(en)(k(n.Monad0().Applicative0()))(Pe(oo)(function(o){return zf(Bs)(function(p){return function(S){return S instanceof Tn?function(Cn){return Cn({parent:y.value,scope:r(v.scope),raiseId:function(at){return xp(o)(at)(s)}})(_)}(e.toElt(S.value0)):p(e.wrapElt(S))}})})(Vi()(u)));return b(n.Monad0().Bind1())(Yt(l)(c))(function(o){return b(n.Monad0().Bind1())(yn(n)(It(D(n.Monad0().Applicative0())(void 0))))(function(p){return b(n.Monad0().Bind1())(m(n.Monad0().Bind1().Apply0().Functor0())(h)(wp(s)))(function(S){var Cn=m(Eo)(function(Rn){return function(Xr){return new Tn(a.fromElt(function(br){return function(q){return Dr(function(rr){return jn(Gn)(n.Monad0().Bind1())(br.raiseId(Rn))(function(){return jn(Gn)(n.Monad0().Bind1())(ir(n.Monad0().Applicative0())(Wt)(br.parent)(function(qo){return rr(a.giveNewParent(q)({id:Rn,parent:qo,scope:br.scope})(Xr))}))(function(){return D(n.Monad0().Applicative0())(D(n.Monad0().Applicative0())(void 0))})})})}}))}})(S),at=he(n.Monad0().Applicative0())(n)(e)(v)(_)(Qb(i(Cn)(h)));return b(n.Monad0().Bind1())(Yt(at)(c))(function(Rn){return jn(Gn)(n.Monad0().Bind1())(tn(n.Monad0().Bind1().Apply0().Functor0())(yn(n)(pr(Rn)(p))))(function(){return D(n.Monad0().Applicative0())(jn(Gn)(n.Monad0().Bind1())(o)(function(){return jn(Gn)(n.Monad0().Bind1())(xe(n.Monad0().Applicative0())(!t)(ir(n.Monad0().Applicative0())(en)(Vi()(S))(function(Xr){return c(a.deleteFromCache(_)({id:Xr}))})))(function(){return Ca(n.Monad0().Bind1())(yn(n)(Tt(p)))})}))})})})})})})})}};return new Tn(a.fromElt(f))}}}}}}}};var kp=function(){return function(n){return function(t){return function(r){return function(e){return function(a){return Yb()(n)(!1)(K(j))(t)(r)(e)(a)}}}}}};var Zb=function(n){return n},Fu=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),Mu=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),Kb=function(n){return n},ji=Ma(),_t=Kb;var Zt=function(){return Fu.create}();var Oa=function(){return Mu.create}(),nt=function(){var n=m(Ur)(m(In)(L(!0)));return function(t){return Zb(n(t))}}(),O=function(n){return n.attr};var nT=function(n){return n.makeText},tT=function(n){return function(t){return function(r){return m(Kn)(function(e){return n.setText(function(a){return{id:t,text:a}}(e))})(r)}}},rT=function(n){return function(t){return function(r){return m(Kn)(function(e){return function(a){if(a.value instanceof Fu)return n.setProp({id:t,key:a.key,value:a.value.value0});if(a.value instanceof Mu)return n.setCb({id:t,key:a.key,value:a.value.value0});throw new Error("Failed pattern match at Deku.Control (line 75, column 26 - line 77, column 45): "+[a.value.constructor.name])}(ji(e))})(r)}}},eT=function(n){return n.makeElement},aT=function(n){return n.attributeParent},Rr=function(n){return function(t){var r=function(e){return function(a){return Dr(function(u){return b(n.Bind1())(a.ids)(function(i){return jn(Gn)(n.Bind1())(e.raiseId(i))(function(){return m(n.Bind1().Apply0().Functor0())(rn(n.Bind1().Apply0())(u(a.deleteFromCache({id:i}))))(Yt(eo(en)(k(n.Applicative0()))([$(n.Applicative0())(nT(a)({id:i,parent:e.parent,scope:e.scope})),tT(a)(i)(t)]))(u))})})})}};return new Tn(r)}},Sn=function(n){return function(t){return Rr(n)($(n.Applicative0())(t))}},Hn=function(n){return function(t){return function(r){return function(e){var a=function(u){return function(i){return Dr(function(f){return b(n.MonadST5().Monad0().Bind1())(i.ids)(function(v){return jn(Gn)(n.MonadST5().Monad0().Bind1())(u.raiseId(v))(function(){return m(n.MonadST5().Monad0().Bind1().Apply0().Functor0())(rn(n.MonadST5().Monad0().Bind1().Apply0())(f(i.deleteFromCache({id:v}))))(Yt(z($n(n.MonadST5().Monad0().Applicative0()))(eo(en)(k(n.MonadST5().Monad0().Applicative0()))(F(dt)([$(n.MonadST5().Monad0().Applicative0())(eT(i)({id:v,parent:u.parent,scope:u.scope,tag:t})),rT(i)(v)(r)])(qn([])(function(_){return[$(n.MonadST5().Monad0().Applicative0())(aT(i)({id:v,parent:_}))]})(u.parent))))(oT(n)({parent:new d(v),scope:u.scope,raiseId:function(_){return D(n.MonadST5().Monad0().Applicative0())(void 0)}})(i)(e)))(f))})})})}};return a}}}},oT=function(n){return he(n.MonadST5().Monad0().Applicative0())(n.MonadST5())({doLogic:function(t){return function(r){return function(e){return r.sendToTop({id:e})}}},ids:function(){var t=Dt();return function(r){return function(e){return e.ids}(t(r))}}(),disconnectElement:function(t){return function(r){return t.disconnectElement({id:r.id,scope:r.scope,parent:r.parent,scopeEq:cn(Na)})}},wrapElt:function(){var t=Hn(n)("div")(ln(k(n.MonadST5().Monad0().Applicative0())));return function(r){return Tn.create(t(r))}}(),toElt:function(t){return t}})};var Op=function(){return function(n){return function(t){return function(r){return kp()(n.MonadST5())({doLogic:function(e){return function(a){return function(u){return a.sendToTop({id:u})}}},ids:function(){var e=Dt();return function(a){return function(u){return u.ids}(e(a))}}(),disconnectElement:function(e){return function(a){return e.disconnectElement({id:a.id,scope:a.scope,parent:a.parent,scopeEq:cn(Na)})}},wrapElt:function(){var e=Hn(n)("div")(ln(k(n.MonadST5().Monad0().Applicative0())));return function(a){return Tn.create(e(a))}}(),toElt:function(e){return e}})({fromElt:function(e){return e},giveNewParent:function(e){return function(a){return function(u){return Dt()(e).giveNewParent(a)}}},deleteFromCache:function(){var e=Dt();return function(a){return function(u){return u.deleteFromCache}(e(a))}}()})(t)(Ar(dr)(m(Eo)(function(e){return e(void 0)}))(Ma()(r)))}}}};var $t=function(){function n(){}return n.value=new n,n}();var Pt={attr:function(n){return function(t){return _t({key:"href",value:Zt(t)})}}};var et=function(){function n(){}return n.value=new n,n}(),Mo={attr:function(n){return function(t){return _t({key:"click",value:Oa(L(Wr(In)(t)(!0)))})}}};var mt={attr:function(n){return function(t){return _t({key:"click",value:Oa(t)})}}};var lr=function(){function n(){}return n.value=new n,n}();var xo={attr:function(n){return function(t){return _t({key:"style",value:Zt(t)})}}};var Wp={attr:function(n){return function(t){return _t({key:"style",value:Zt(t)})}}};var Up={attr:function(n){return function(t){return _t({key:"style",value:Zt(t)})}}};var Yc={attr:function(n){return function(t){return _t({key:"style",value:Zt(t)})}}};var Gi={attr:function(n){return function(t){return _t({key:"style",value:Zt(t)})}}};var Hp={attr:function(n){return function(t){return _t({key:"style",value:Zt(t)})}}};var Xi=function(n){return function(t){return function(r){return new Tn(Hn(n)("a")(t)(it(r)))}}};var Zc=function(n){return function(t){return function(r){return new Tn(Hn(n)("div")(t)(it(r)))}}},On=function(n){return Zc(n)(ln(k(n.MonadST5().Monad0().Applicative0())))};var Wa=function(n){return function(t){return function(r){return new Tn(Hn(n)("span")(t)(it(r)))}}},wu=function(n){return Wa(n)(ln(k(n.MonadST5().Monad0().Applicative0())))};var wo=function(){function n(){}return n.value=new n,n}();var qp={attr:function(n){return function(t){return _t({key:"type",value:Zt(t)})}}};var Yi={attr:function(n){return function(t){return _t({key:"type",value:Zt(t)})}}};var yr=function(n){return function(t){return function(r){return new Tn(Hn(n)("button")(t)(it(r)))}}},zp=function(n){return yr(n)(ln(k(n.MonadST5().Monad0().Applicative0())))};var uT=function(n){return function(t){return function(r){return new Tn(Hn(n)("code")(t)(it(r)))}}},xt=function(n){return uT(n)(ln(k(n.MonadST5().Monad0().Applicative0())))};var iT=function(n){return function(t){return function(r){return new Tn(Hn(n)("i")(t)(it(r)))}}},Vp=function(n){return iT(n)(ln(k(n.MonadST5().Monad0().Applicative0())))};var pa=function(n){return function(t){return function(r){return new Tn(Hn(n)("input")(t)(it(r)))}}};var cT=function(n){return function(t){return function(r){return new Tn(Hn(n)("li")(t)(it(r)))}}},Jp=function(n){return cT(n)(ln(k(n.MonadST5().Monad0().Applicative0())))};var sT=function(n){return function(t){return function(r){return new Tn(Hn(n)("pre")(t)(it(r)))}}},wt=function(n){return sT(n)(ln(k(n.MonadST5().Monad0().Applicative0())))};var _T=function(n){return function(t){return function(r){return new Tn(Hn(n)("ul")(t)(it(r)))}}},jp=function(n){return _T(n)(ln(k(n.MonadST5().Monad0().Applicative0())))};var Ki=function(){function n(){}return n.value=new n,n}(),Ao=function(){function n(){}return n.value=new n,n}(),Lo=function(){function n(){}return n.value=new n,n}(),Io=function(){function n(){}return n.value=new n,n}(),So=function(){function n(){}return n.value=new n,n}(),$o=function(){function n(){}return n.value=new n,n}(),Po=function(){function n(){}return n.value=new n,n}(),No=function(){function n(){}return n.value=new n,n}(),Ro=function(){function n(){}return n.value=new n,n}(),ko=function(){function n(){}return n.value=new n,n}(),Gp=function(n){return n==="Intro"?D(Ut)(Ki.value):n==="HelloWorld"?D(Ut)(Ao.value):n==="SimpleComponent"?D(Ut)(Lo.value):n==="PURSX1"?D(Ut)(Io.value):n==="PURSX2"?D(Ut)(So.value):n==="Events"?D(Ut)($o.value):n==="Effects"?D(Ut)(Po.value):n==="Events2"?D(Ut)(No.value):n==="Portals"?D(Ut)(Ro.value):n==="SSR"?D(Ut)(ko.value):ln(Is)};function nl(){window.scrollTo(0,0)}var Kt=nl;var vT=function(n){return n};var At=function(n){return{pursxToElement:function(t){return function(r){return function(e){return{cache:sa,element:function(a){return function(u){return ln(k(n))}}}}}}}},tl=function(n){return n.pursxToElement},qt=function(){return function(n){return function(t){return function(r){return function(e){return{pursxToElement:function(a){return function(u){return function(i){var f=tl(n)(a)(M.value)(i);return{cache:Fo(Ce(t)(M.value))(!0)(f.cache),element:function(v){return function(_){return z($n(e.MonadST5().Monad0().Applicative0()))(m(Kn)(Ar(dr)(ji)(function(c){if(c.value instanceof Fu)return _.setProp({id:Ce(t)(M.value)+a,key:c.key,value:c.value.value0});if(c.value instanceof Mu)return _.setCb({id:Ce(t)(M.value)+a,key:c.key,value:c.value.value0});throw new Error("Failed pattern match at Deku.Pursx (line 4475, column 38 - line 4485, column 24): "+[c.value.constructor.name])}))(Oc(r)()(M.value)(i)))(f.element(v)(_))}}}}}}}}}}}};var zn=vT,rl=function(n){return function(t){return function(){return function(){return function(r){return function(e){return function(a){return function(u){return function(i){var f=function(v){return function(_){return Dr(function(c){return b(r.MonadST5().Monad0().Bind1())(_.ids)(function(s){return b(r.MonadST5().Monad0().Bind1())(_.ids)(function(l){return jn(Gn)(r.MonadST5().Monad0().Bind1())(v.raiseId(s))(function(){var o=tl(e)(l)(M.value)(i);return m(r.MonadST5().Monad0().Bind1().Apply0().Functor0())(rn(r.MonadST5().Monad0().Bind1().Apply0())(c(_.deleteFromCache({id:s}))))(Yt(z($n(r.MonadST5().Monad0().Applicative0()))($(r.MonadST5().Monad0().Applicative0())(_.makePursx({id:s,parent:v.parent,cache:o.cache,pxScope:l,scope:v.scope,html:Ce(n)(u),verb:Ce(t)(a)})))(o.element(v)(_)))(c))})})})})}};return new Tn(f)}}}}}}}}},Nt=function(n){return function(){return function(){return function(t){return function(r){return rl(n)({reflectType:function(){return"~"}})()()(r)(t)(M.value)}}}}},Xp=function(n){return function(){return function(t){return function(r){return function(e){return Nt(n)()()(r)(t)(e)({})}}}}},dT=function(n){return he(n.MonadST5().Monad0().Applicative0())(n.MonadST5())({doLogic:function(t){return function(r){return function(e){return r.sendToTop({id:e})}}},ids:function(){var t=Dt();return function(r){return function(e){return e.ids}(t(r))}}(),disconnectElement:function(t){return function(r){return t.disconnectElement({id:r.id,scope:r.scope,parent:r.parent,scopeEq:cn(Na)})}},wrapElt:function(){var t=Hn(n)("div")(ln(k(n.MonadST5().Monad0().Applicative0())));return function(r){return Tn.create(t(r))}}(),toElt:function(t){return t}})},Vn=function(){return function(n){return function(t){return function(r){return function(e){return{pursxToElement:function(a){return function(u){return function(i){var f=Oc(r)()(M.value)(i),v=tl(n)(a)(M.value)(i);return{cache:Fo(Ce(t)(M.value))(!1)(v.cache),element:function(_){return function(c){return z($n(e.MonadST5().Monad0().Applicative0()))(dT(e)({parent:new d(Ce(t)(M.value)+a),scope:_.scope,raiseId:function(s){return D(e.MonadST5().Monad0().Applicative0())(void 0)}})(c)(f))(v.element(_)(c))}}}}}}}}}}}};function Qp(n){return n.target}function Rt(n){return function(){return n.preventDefault()}}function Yp(n,t,r){return n==null?t:r(n)}function el(n){return n}var Oo=qn(null)(el),zt=function(n){return Yp(n,y.value,d.create)};var rf=function(n){return zt(Qp(n))};var bT=function(){return M.value}(),Kp=function(n){return function(t){return Nt({reflectType:function(){return`<div>
  <h1>A Simple Component</h1>

  <h3>Slightly more bells and whistles</h3>
  <p>
    Let's look at an example with several different DOM tags.
  </p>

  ~code~

  <p>And here's what it produces:</p>

  <blockquote> ~result~ </blockquote>

  <h1>Creating an element</h1>
  <p>To create an element, like for example a <code>span</code> element, the pattern goes like this:</p>

  <pre><code>mySpanWithAttrs = D.span attrs children
mySpanWithNoAttrs = D.span_ children
myDivWithNoChildren = D.div attrs blank
</code></pre>

  <p><code>attrs</code> contains attributes of type <code>Event (Attribute element)</code>, where <code>element</code> is the current element you're assigning attributes to. You never have to specify this type: it is inferred automatically by the attribute creation operator, aka <code>:=</code>. If you use an attribute that's unsupported by an element, the compiler will complain.</p>

  <p>For now, children is an array of children, not unlike Halogen or React sans JSX. We'll see some other types of children later in this guide.</p>

  <h1>Attributes</h1>
  <p>Attributes like an element's style or id are specified as the first argument to an element. Attributes are just <a href="https://github.com/mikesol/purescript-event/blob/master/src/FRP/Event.purs"><code>Event</code>-s</a>, so you can <code>bang</code> them to make them happen <i>now</i>, combine two event streams with <code>alt</code> to compose events, etc.</p>

  <p>As an example, we made the input a range slider using <code>bang (Xtype := "range")</code>. Unlike Halogen, there are no checks to make sure you give a valid string. So if you want your range slider to have the value of true, you can. One day, I may build some validators, but passing strings works decently well here.</p>

  <h2>Next steps</h2>
  <p>In this section, we built a simple component. In the next section, we'll recreate the exact same element using a different input syntax called <a ~next~ style="cursor:pointer;">Pursx</a>.</p>
</div>`}})()()(Vn()(qt()(Vn()(At(t.MonadST5().Monad0().Applicative0()))({reflectType:function(){return"result"}})({reflectSymbol:function(){return"result"}})(t))({reflectType:function(){return"next"}})({reflectSymbol:function(){return"next"}})(t))({reflectType:function(){return"code"}})({reflectSymbol:function(){return"code"}})(t))(t)(bT)({code:zn(wt(t)([xt(t)([Sn(t.MonadST5().Monad0())(`module Main where

import Prelude

import Deku.Attribute ((:=))
import Deku.Control (text_)
import Deku.DOM as D
import Deku.Toplevel (runInBodyA)
import Effect (Effect)
import FRP.Event.Class (bang)

main :: Effect Unit
main = runInBodyA
  ( [ D.button_ [ text_ "I do nothing" ]
    , D.ul_ $ map (D.li_ <<< pure <<< text_) [ "A", "B", "C" ]
    , D.div_
        [ D.a (bang $ D.Href := "https://example.com")
            [ text_ "foo " ]
        , D.i_ [ text_ " bar " ]
        , D.span (bang $ D.Style := "font-weight: 800;")
            [ text_ " baz" ]
        ]
    , D.div_
        [ D.div_
            [ D.div_ [ D.input (bang $ D.Xtype := "range") [] ]
            ]
        ]
    ]
  )`)])])),result:zn(On(t)([zp(t)([Sn(t.MonadST5().Monad0())("I do nothing")]),jp(t)(m(lt)(function(){var r=Jp(t),e=D(Go),a=Sn(t.MonadST5().Monad0());return function(u){return r(e(a(u)))}}())(["A","B","C"])),On(t)([Xi(t)($(t.MonadST5().Monad0().Applicative0())(O(Pt)($t.value)("https://example.com")))([Sn(t.MonadST5().Monad0())("foo ")]),Vp(t)([Sn(t.MonadST5().Monad0())(" bar ")]),Wa(t)($(t.MonadST5().Monad0().Applicative0())(O(xo)(lr.value)("font-weight: 800;")))([Sn(t.MonadST5().Monad0())(" baz")])]),On(t)([On(t)([On(t)([pa(t)($(t.MonadST5().Monad0().Applicative0())(O(Yi)(wo.value)("range")))([])])])])])),next:ft(en)(k(t.MonadST5().Monad0().Applicative0()))($(t.MonadST5().Monad0().Applicative0()))([O(mt)(et.value)(nt(function(r){return rn(Yn)(rn(Yn)(Rt(r))(n.dpage(Io.value)))(Kt)})),O(Pt)($t.value)(n.slug+"pursx1/")])})}};function nm(n,t,r,e,a){return function(u,i){var f=n.newXHR(),v=n.fixupUrl(a.url,f);if(f.open(a.method||"GET",v,!0,a.username,a.password),a.headers)try{for(var _=0,c;(c=a.headers[_])!=null;_++)f.setRequestHeader(c.field,c.value)}catch(l){u(l)}var s=function(l){return function(){u(new Error(l))}};return f.onerror=s(r),f.ontimeout=s(t),f.onload=function(){i({status:f.status,statusText:f.statusText,headers:f.getAllResponseHeaders().split(`\r
`).filter(function(l){return l.length>0}).map(function(l){var o=l.indexOf(":");return e(l.substring(0,o))(l.substring(o+2))}),body:f.response})},f.responseType=a.responseType,f.withCredentials=a.withCredentials,f.timeout=a.timeout,f.send(a.content),function(l,o,p){try{f.abort()}catch(S){return o(S)}return p()}}}var ef="application/json",tm="application/x-www-form-urlencoded";var em=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),am=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),om=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),um=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),im=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),al=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),ol=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),fm=function(n){return n instanceof al?new d(tm):n instanceof ol?new d(ef):y.value};var af=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),of=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),cm=function(){function n(t,r){this.value0=t,this.value1=r}return n.create=function(t){return function(r){return new n(t,r)}},n}(),lm=function(n){if(n instanceof af)return Dt()(n.value0);if(n instanceof of)return Dt()(n.value0);if(n instanceof cm)return n.value1;throw new Error("Failed pattern match at Affjax.RequestHeader (line 26, column 1 - line 26, column 33): "+[n.constructor.name])};var ul=function(n){if(n instanceof af)return"Accept";if(n instanceof of)return"Content-Type";if(n instanceof cm)return n.value0;throw new Error("Failed pattern match at Affjax.RequestHeader (line 21, column 1 - line 21, column 32): "+[n.constructor.name])};var il=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),fl=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),cl=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),Au=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),ll=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),uf=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),sm=function(n){if(n instanceof il)return"arraybuffer";if(n instanceof fl)return"blob";if(n instanceof cl)return"document";if(n instanceof Au||n instanceof ll)return"text";if(n instanceof uf)return"";throw new Error("Failed pattern match at Affjax.ResponseFormat (line 44, column 3 - line 50, column 19): "+[n.constructor.name])},_m=function(n){return n instanceof Au?new d(ef):y.value};var pm=function(){return new Au(K(j))}(),mm=function(){return new uf(K(j))}();var dm=function(){function n(t,r){this.value0=t,this.value1=r}return n.create=function(t){return function(r){return new n(t,r)}},n}();function Wo(n){return new Error(n)}function Lu(n){return n.message}function Iu(n){return function(){throw n}}var pe=function(n){return n.throwError};var Je=function(n){return n.catchError};var cf=function(n){return function(t){return Je(n)(m(n.MonadThrow0().Monad0().Bind1().Apply0().Functor0())(R.create)(t))(function(){var r=D(n.MonadThrow0().Monad0().Applicative0());return function(e){return r(H.create(e))}}())}};var Me=function(n){return n.state};var Uo=function(n){return function(t){return Me(n)(function(r){var e=t(r);return new C(e,e)})}};var me=function(n){return n.liftEffect};var sl=function(n){return n};var _l=function(n){return n};var mf=function(n){return function(t){return n(t)}},ym=function(n){return{map:function(t){return mf(m(n)(m(Ya)(t)))}}};var pl=function(n){return{Applicative0:function(){return Ba(n)},Bind1:function(){return ml(n)}}},ml=function(n){return{bind:function(t){return function(r){return b(n.Bind1())(t)(Vr(function(){var e=D(n.Applicative0());return function(a){return e(H.create(a))}}())(function(e){var a=r(e);return a}))}},Apply0:function(){return gm(n)}}},gm=function(n){return{apply:jr(pl(n)),Functor0:function(){return ym(n.Bind1().Apply0().Functor0())}}},Ba=function(n){return{pure:function(){var t=D(n.Applicative0());return function(r){return sl(t(R.create(r)))}}(),Apply0:function(){return gm(n)}}};var bm=function(n){return{throwError:function(){var t=D(n.Applicative0());return function(r){return sl(t(H.create(r)))}}(),Monad0:function(){return pl(n)}}};var vl=function(n){return function(t){return{alt:function(r){return function(e){return b(t.Bind1())(r)(function(a){if(a instanceof R)return D(t.Applicative0())(new R(a.value0));if(a instanceof H)return b(t.Bind1())(e)(function(u){if(u instanceof R)return D(t.Applicative0())(new R(u.value0));if(u instanceof H)return D(t.Applicative0())(new H(F(n)(a.value0)(u.value0)));throw new Error("Failed pattern match at Control.Monad.Except.Trans (line 86, column 9 - line 88, column 49): "+[u.constructor.name])});throw new Error("Failed pattern match at Control.Monad.Except.Trans (line 82, column 5 - line 88, column 49): "+[a.constructor.name])})}},Functor0:function(){return ym(t.Bind1().Apply0().Functor0())}}}};var Tm=function(){var n=Dt();return function(t){return n(_l(t))}}();function dl(n){return JSON.stringify(n)}function Dl(n){return function(t){return JSON.stringify(t,null,n)}}var Cm=sa;function Em(n,t,r){try{return t(JSON.parse(r))}catch(e){return n(e.message)}}var Fm=function(n){return Em(H.create,R.create,n)};var df=function(n){return function(t){return function(r){return r.replace(n,t)}}};var yl=function(n){return function(t){return t.join(n)}};function kT(n){return n.replace(/[!'()*]/g,function(t){return"%"+t.charCodeAt(0).toString(16)})}var wm=function(t,r,e){try{return r(kT(encodeURIComponent(e)).replace(/%20/g,"+"))}catch(a){return t(a)}};var Df=function(){return lc(wm)(L(y.value))(d.create)}();var UT=function(n){return n};var Am=function(){var n=function(e){if(e.value1 instanceof y)return Df(e.value0);if(e.value1 instanceof d)return En(Ta)(m(rt)(function(a){return function(u){return a+("="+u)}})(Df(e.value0)))(Df(e.value1.value0));throw new Error("Failed pattern match at Data.FormURLEncoded (line 37, column 16 - line 39, column 114): "+[e.constructor.name])},t=m(rt)(yl("&")),r=_r(ke)(Ut)(n);return function(e){return t(r(UT(e)))}}();var BT=function(){function n(){}return n.value=new n,n}(),Ou=function(){function n(){}return n.value=new n,n}(),qT=function(){function n(){}return n.value=new n,n}(),Lm=function(){function n(){}return n.value=new n,n}(),Im=function(){function n(){}return n.value=new n,n}(),Sm=function(){function n(){}return n.value=new n,n}(),zT=function(){function n(){}return n.value=new n,n}(),VT=function(){function n(){}return n.value=new n,n}(),JT=function(){function n(){}return n.value=new n,n}(),jT=function(){function n(){}return n.value=new n,n}(),GT=function(){function n(){}return n.value=new n,n}(),XT=function(){function n(){}return n.value=new n,n}(),QT=function(){function n(){}return n.value=new n,n}(),YT=function(){function n(){}return n.value=new n,n}(),ZT=function(){function n(){}return n.value=new n,n}(),$m=function(){function n(){}return n.value=new n,n}();var KT=function(n){return n},nC={show:function(n){if(n instanceof BT)return"OPTIONS";if(n instanceof Ou)return"GET";if(n instanceof qT)return"HEAD";if(n instanceof Lm)return"POST";if(n instanceof Im)return"PUT";if(n instanceof Sm)return"DELETE";if(n instanceof zT)return"TRACE";if(n instanceof VT)return"CONNECT";if(n instanceof JT)return"PROPFIND";if(n instanceof jT)return"PROPPATCH";if(n instanceof GT)return"MKCOL";if(n instanceof XT)return"COPY";if(n instanceof QT)return"MOVE";if(n instanceof YT)return"LOCK";if(n instanceof ZT)return"UNLOCK";if(n instanceof $m)return"PATCH";throw new Error("Failed pattern match at Data.HTTP.Method (line 43, column 1 - line 59, column 23): "+[n.constructor.name])}};var Pm=Vr(N(nC))(KT);var km=function(){var n=gi(fc);return function(t){return bi(n(t))}}();var Om=function(n){return n.value0};var Lr=function(){var n={},t="Pure",r="Throw",e="Catch",a="Sync",u="Async",i="Bind",f="Bracket",v="Fork",_="Sequential",c="Map",s="Apply",l="Alt",o="Cons",p="Resume",S="Release",Cn="Finalizer",at="Finalized",Rn="Forked",Xr="Fiber",br="Thunk";function q(P,kn,yt,Bn){this.tag=P,this._1=kn,this._2=yt,this._3=Bn}function rr(P){var kn=function(yt,Bn,V){return new q(P,yt,Bn,V)};return kn.tag=P,kn}function qo(P){return new q(t,void 0)}function Nd(P){try{P()}catch(kn){setTimeout(function(){throw kn},0)}}function Rd(P,kn,yt){try{return kn(yt())}catch(Bn){return P(Bn)}}function kd(P,kn,yt){try{return kn(yt)()}catch(Bn){return yt(P(Bn))(),qo}}var ju=function(){var P=1024,kn=0,yt=0,Bn=new Array(P),V=!1;function w(){var Wn;for(V=!0;kn!==0;)kn--,Wn=Bn[yt],Bn[yt]=void 0,yt=(yt+1)%P,Wn();V=!1}return{isDraining:function(){return V},enqueue:function(Wn){var gn,vt;kn===P&&(vt=V,w(),V=vt),Bn[(yt+kn)%P]=Wn,kn++,V||w()}}}();function Od(P){var kn={},yt=0,Bn=0;return{register:function(V){var w=yt++;V.onComplete({rethrow:!0,handler:function(Wn){return function(){Bn--,delete kn[w]}}})(),kn[w]=V,Bn++},isEmpty:function(){return Bn===0},killAll:function(V,w){return function(){if(Bn===0)return w();var Wn=0,gn={};function vt(Zn){gn[Zn]=kn[Zn].kill(V,function(ht){return function(){delete gn[Zn],Wn--,P.isLeft(ht)&&P.fromLeft(ht)&&setTimeout(function(){throw P.fromLeft(ht)},0),Wn===0&&w()}})()}for(var Jt in kn)kn.hasOwnProperty(Jt)&&(Wn++,vt(Jt));return kn={},yt=0,Bn=0,function(Zn){return new q(a,function(){for(var ht in gn)gn.hasOwnProperty(ht)&&gn[ht]()})}}}}}var za=0,Tr=1,Gu=2,Xu=3,Qu=4,Ir=5,zo=6;function $f(P,kn,yt){var Bn=0,V=za,w=yt,Wn=null,gn=null,vt=null,Jt=null,Zn=null,ht=0,ya=0,Or=null,Xe=!0;function Qe(J){for(var G,An,Pn;;)switch(G=null,An=null,Pn=null,V){case Gu:V=Tr;try{w=vt(w),Jt===null?vt=null:(vt=Jt._1,Jt=Jt._2)}catch(nr){V=Ir,Wn=P.left(nr),w=null}break;case Xu:P.isLeft(w)?(V=Ir,Wn=w,w=null):vt===null?V=Ir:(V=Gu,w=P.fromRight(w));break;case Tr:switch(w.tag){case i:vt&&(Jt=new q(o,vt,Jt)),vt=w._2,V=Tr,w=w._1;break;case t:vt===null?(V=Ir,w=P.right(w._1)):(V=Gu,w=w._1);break;case a:V=Xu,w=Rd(P.left,P.right,w._1);break;case u:V=Qu,w=kd(P.left,w._1,function(nr){return function(){Bn===J&&(Bn++,ju.enqueue(function(){Bn===J+1&&(V=Xu,w=nr,Qe(Bn))}))}});return;case r:V=Ir,Wn=P.left(w._1),w=null;break;case e:vt===null?Zn=new q(o,w,Zn,gn):Zn=new q(o,w,new q(o,new q(p,vt,Jt),Zn,gn),gn),vt=null,Jt=null,V=Tr,w=w._1;break;case f:ht++,vt===null?Zn=new q(o,w,Zn,gn):Zn=new q(o,w,new q(o,new q(p,vt,Jt),Zn,gn),gn),vt=null,Jt=null,V=Tr,w=w._1;break;case v:V=Xu,G=$f(P,kn,w._2),kn&&kn.register(G),w._1&&G.run(),w=P.right(G);break;case _:V=Tr,w=Ud(P,kn,w._1);break}break;case Ir:if(vt=null,Jt=null,Zn===null)V=zo,w=gn||Wn||w;else switch(G=Zn._3,Pn=Zn._1,Zn=Zn._2,Pn.tag){case e:gn&&gn!==G&&ht===0?V=Ir:Wn&&(V=Tr,w=Pn._2(P.fromLeft(Wn)),Wn=null);break;case p:gn&&gn!==G&&ht===0||Wn?V=Ir:(vt=Pn._1,Jt=Pn._2,V=Gu,w=P.fromRight(w));break;case f:ht--,Wn===null&&(An=P.fromRight(w),Zn=new q(o,new q(S,Pn._2,An),Zn,G),(gn===G||ht>0)&&(V=Tr,w=Pn._3(An)));break;case S:Zn=new q(o,new q(at,w,Wn),Zn,gn),V=Tr,gn&&gn!==G&&ht===0?w=Pn._1.killed(P.fromLeft(gn))(Pn._2):Wn?w=Pn._1.failed(P.fromLeft(Wn))(Pn._2):w=Pn._1.completed(P.fromRight(w))(Pn._2),Wn=null,ht++;break;case Cn:ht++,Zn=new q(o,new q(at,w,Wn),Zn,gn),V=Tr,w=Pn._1;break;case at:ht--,V=Ir,w=Pn._1,Wn=Pn._2;break}break;case zo:for(var bt in Or)Or.hasOwnProperty(bt)&&(Xe=Xe&&Or[bt].rethrow,Nd(Or[bt].handler(w)));Or=null,gn&&Wn?setTimeout(function(){throw P.fromLeft(Wn)},0):P.isLeft(w)&&Xe&&setTimeout(function(){if(Xe)throw P.fromLeft(w)},0);return;case za:V=Tr;break;case Qu:return}}function gt(J){return function(){if(V===zo)return Xe=Xe&&J.rethrow,J.handler(w)(),function(){};var G=ya++;return Or=Or||{},Or[G]=J,function(){Or!==null&&delete Or[G]}}}function Z(J,G){return function(){if(V===zo)return G(P.right(void 0))(),function(){};var An=gt({rethrow:!1,handler:function(){return G(P.right(void 0))}})();switch(V){case za:gn=P.left(J),V=zo,w=gn,Qe(Bn);break;case Qu:gn===null&&(gn=P.left(J)),ht===0&&(V===Qu&&(Zn=new q(o,new q(Cn,w(J)),Zn,gn)),V=Ir,w=null,Wn=null,Qe(++Bn));break;default:gn===null&&(gn=P.left(J)),ht===0&&(V=Ir,w=null,Wn=null)}return An}}function hn(J){return function(){var G=gt({rethrow:!1,handler:J})();return V===za&&Qe(Bn),G}}return{kill:Z,join:hn,onComplete:gt,isSuspended:function(){return V===za},run:function(){V===za&&(ju.isDraining()?Qe(Bn):ju.enqueue(function(){Qe(Bn)}))}}}function Wd(P,kn,yt,Bn){var V=0,w={},Wn=0,gn={},vt=new Error("[ParAff] Early exit"),Jt=null,Zn=n;function ht(gt,Z,hn){var J=Z,G=null,An=null,Pn=0,bt={},nr,Vo;n:for(;;)switch(nr=null,J.tag){case Rn:if(J._3===n&&(nr=w[J._1],bt[Pn++]=nr.kill(gt,function(Hd){return function(){Pn--,Pn===0&&hn(Hd)()}})),G===null)break n;J=G._2,An===null?G=null:(G=An._1,An=An._2);break;case c:J=J._2;break;case s:case l:G&&(An=new q(o,G,An)),G=J,J=J._1;break}if(Pn===0)hn(P.right(void 0))();else for(Vo=0,nr=Pn;Vo<nr;Vo++)bt[Vo]=bt[Vo]();return bt}function ya(gt,Z,hn){var J,G,An,Pn,bt,nr;P.isLeft(gt)?(J=gt,G=null):(G=gt,J=null);n:for(;;){if(An=null,Pn=null,bt=null,nr=null,Jt!==null)return;if(Z===null){Bn(J||G)();return}if(Z._3!==n)return;switch(Z.tag){case c:J===null?(Z._3=P.right(Z._1(P.fromRight(G))),G=Z._3):Z._3=J;break;case s:if(An=Z._1._3,Pn=Z._2._3,J){if(Z._3=J,bt=!0,nr=Wn++,gn[nr]=ht(vt,J===An?Z._2:Z._1,function(){return function(){delete gn[nr],bt?bt=!1:hn===null?ya(J,null,null):ya(J,hn._1,hn._2)}}),bt){bt=!1;return}}else{if(An===n||Pn===n)return;G=P.right(P.fromRight(An)(P.fromRight(Pn))),Z._3=G}break;case l:if(An=Z._1._3,Pn=Z._2._3,An===n&&P.isLeft(Pn)||Pn===n&&P.isLeft(An))return;if(An!==n&&P.isLeft(An)&&Pn!==n&&P.isLeft(Pn))J=G===An?Pn:An,G=null,Z._3=J;else if(Z._3=G,bt=!0,nr=Wn++,gn[nr]=ht(vt,G===An?Z._2:Z._1,function(){return function(){delete gn[nr],bt?bt=!1:hn===null?ya(G,null,null):ya(G,hn._1,hn._2)}}),bt){bt=!1;return}break}hn===null?Z=null:(Z=hn._1,hn=hn._2)}}function Or(gt){return function(Z){return function(){delete w[gt._1],gt._3=Z,ya(Z,gt._2._1,gt._2._2)}}}function Xe(){var gt=Tr,Z=yt,hn=null,J=null,G,An;n:for(;;)switch(G=null,An=null,gt){case Tr:switch(Z.tag){case c:hn&&(J=new q(o,hn,J)),hn=new q(c,Z._1,n,n),Z=Z._2;break;case s:hn&&(J=new q(o,hn,J)),hn=new q(s,n,Z._2,n),Z=Z._1;break;case l:hn&&(J=new q(o,hn,J)),hn=new q(l,n,Z._2,n),Z=Z._1;break;default:An=V++,gt=Ir,G=Z,Z=new q(Rn,An,new q(o,hn,J),n),G=$f(P,kn,G),G.onComplete({rethrow:!1,handler:Or(Z)})(),w[An]=G,kn&&kn.register(G)}break;case Ir:if(hn===null)break n;hn._1===n?(hn._1=Z,gt=Tr,Z=hn._2,hn._2=n):(hn._2=Z,Z=hn,J===null?hn=null:(hn=J._1,J=J._2))}for(Zn=Z,An=0;An<V;An++)w[An].run()}function Qe(gt,Z){Jt=P.left(gt);var hn;for(var J in gn)if(gn.hasOwnProperty(J)){hn=gn[J];for(J in hn)hn.hasOwnProperty(J)&&hn[J]()}gn=null;var G=ht(gt,Zn,Z);return function(An){return new q(u,function(Pn){return function(){for(var bt in G)G.hasOwnProperty(bt)&&G[bt]();return qo}})}}return Xe(),function(gt){return new q(u,function(Z){return function(){return Qe(gt,Z)}})}}function Ud(P,kn,yt){return new q(u,function(Bn){return function(){return Wd(P,kn,yt,Bn)}})}return q.EMPTY=n,q.Pure=rr(t),q.Throw=rr(r),q.Catch=rr(e),q.Sync=rr(a),q.Async=rr(u),q.Bind=rr(i),q.Bracket=rr(f),q.Fork=rr(v),q.Seq=rr(_),q.ParMap=rr(c),q.ParApply=rr(s),q.ParAlt=rr(l),q.Fiber=$f,q.Supervisor=Od,q.Scheduler=ju,q.nonCanceler=qo,q}(),Um=Lr.Pure,Hm=Lr.Throw;function Bm(n){return function(t){return Lr.Catch(n,t)}}function qm(n){return function(t){return t.tag===Lr.Pure.tag?Lr.Pure(n(t._1)):Lr.Bind(t,function(r){return Lr.Pure(n(r))})}}function zm(n){return function(t){return Lr.Bind(n,t)}}var Vm=Lr.Sync;var Wu=Lr.Async;function Jm(n,t){return function(){return Lr.Fiber(n,null,t)}}var tC=function(){function n(r,e){return r===0&&typeof setImmediate<"u"?setImmediate(e):setTimeout(e,r)}function t(r,e){return r===0&&typeof clearImmediate<"u"?clearImmediate(e):clearTimeout(e)}return function(r,e){return Lr.Async(function(a){return function(){var u=n(e,a(r()));return function(){return Lr.Sync(function(){return r(t(e,u))})}}})}}(),rC=Lr.Seq;var DC=function(n,t,r){var e=0,a;return function(u){if(e===2)return a;if(e===1)throw new ReferenceError(n+" was needed before it finished initializing (module "+t+", line "+u+")",t,u);return e=1,a=r(),e=2,a}};var Cl={map:qm};var yC=function(){var n=function(e){if(e instanceof R)return e.value0;if(e instanceof H)return ee("unsafeFromRight: Left");throw new Error("Failed pattern match at Effect.Aff (line 407, column 21 - line 409, column 54): "+[e.constructor.name])},t=function(e){if(e instanceof H)return e.value0;if(e instanceof R)return ee("unsafeFromLeft: Right");throw new Error("Failed pattern match at Effect.Aff (line 402, column 20 - line 404, column 55): "+[e.constructor.name])},r=function(e){if(e instanceof H)return!0;if(e instanceof R)return!1;throw new Error("Failed pattern match at Effect.Aff (line 397, column 12 - line 399, column 21): "+[e.constructor.name])};return{isLeft:r,fromLeft:t,fromRight:n,left:H.create,right:R.create}}(),gC=function(n){return Jm(yC,n)},bC=function(n){return function(){var r=gC(n)();return r.run(),r}},Ym=function(){var n=tn(In);return function(t){return n(bC(t))}}();var hl={Applicative0:function(){return yf},Bind1:function(){return El}},El={bind:zm,Apply0:function(){return Zm(0)}},yf={pure:Um,Apply0:function(){return Zm(0)}},Zm=DC("applyAff","Effect.Aff",function(){return{apply:jr(hl),Functor0:function(){return Cl}}});var Fl={liftEffect:Vm,Monad0:function(){return hl}};var TC={throwError:Hm,Monad0:function(){return hl}},Km={catchError:Bm,MonadThrow0:function(){return TC}};var nv=L(D(yf)(void 0));var ov=function(n){return Wu(function(t){return function(){var e=n(function(a){return t(H.create(a))()},function(a){return t(R.create(a))()});return function(a){return Wu(function(u){return function(){return e(a,function(f){return u(H.create(f))()},function(f){return u(R.create(f))()}),nv}})}}})};function gf(n){return Object.prototype.toString.call(n).slice(8,-1)}var uv=Array.isArray||function(n){return Object.prototype.toString.call(n)==="[object Array]"};var iv=function(n){return function(t){return function(r){return(r|0)===r?n(r):t}}},gr=function(n){return n};var bf=isFinite;var Al=Math.floor;var Uu=function(n){return function(t){return n%t}};var Tf=function(){return iv(d.create)(y.value)}(),VC=function(n){if(!bf(n))return 0;if(n>=gr(Br(ba)))return Br(ba);if(n<=gr(Zr(ba)))return Zr(ba);if(er)return or(0)(Tf(n));throw new Error("Failed pattern match at Data.Int (line 72, column 1 - line 72, column 29): "+[n.constructor.name])};var Il=function(n){return VC(Al(n))};var Sl=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),dv=function(){function n(t,r){this.value0=t,this.value1=r}return n.create=function(t){return function(r){return new n(t,r)}},n}(),ZC=function(){function n(t,r){this.value0=t,this.value1=r}return n.create=function(t){return function(r){return new n(t,r)}},n}(),KC=function(){function n(t,r){this.value0=t,this.value1=r}return n.create=function(t){return function(r){return new n(t,r)}},n}(),va=h,nh=h;var hf=function(n){if(n instanceof Sl)return n.value0;if(n instanceof ZC)return"Error at array index "+(N(qr)(n.value0)+(": "+hf(n.value1)));if(n instanceof KC)return"Error at property "+(N(sr)(n.value0)+(": "+hf(n.value1)));if(n instanceof dv)return"Type mismatch: expected "+(n.value0+(", found "+n.value1));throw new Error("Failed pattern match at Foreign (line 78, column 1 - line 78, column 45): "+[n.constructor.name])};var $l=function(n){var t=pe(bm(n));return function(r){return t(km(r))}};var da=function(n){return function(t){return function(r){if(gf(r)===t)return D(Ba(n))(nh(r));if(er)return $l(n)(new dv(t,gf(r)));throw new Error("Failed pattern match at Foreign (line 123, column 1 - line 123, column 104): "+[t.constructor.name,r.constructor.name])}}};var Pl=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),Nl=function(){function n(t,r){this.value0=t,this.value1=r}return n.create=function(t){return function(r){return new n(t,r)}},n}(),Rl=function(){function n(){}return n.value=new n,n}(),kl=function(){function n(){}return n.value=new n,n}(),Ol=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),Dv=function(n){return function(t){var r=function(c){return c===""?D(Ba(ut))(Cm):Vr(function(){var s=$l(ut);return function(l){return s(Sl.create(l))}}())(D(Ba(ut)))(Fm(c))},e=function(){if(t.responseFormat instanceof il)return da(ut)("ArrayBuffer");if(t.responseFormat instanceof fl)return da(ut)("Blob");if(t.responseFormat instanceof cl)return function(c){return z(vl(ic)(ut))(da(ut)("Document")(c))(z(vl(ic)(ut))(da(ut)("XMLDocument")(c))(da(ut)("HTMLDocument")(c)))};if(t.responseFormat instanceof Au)return ei(ml(ut))(function(c){return t.responseFormat.value0(r(c))})(da(ut)("String"));if(t.responseFormat instanceof ll)return da(ut)("String");if(t.responseFormat instanceof uf)return L(t.responseFormat.value0(D(Ba(ut))(void 0)));throw new Error("Failed pattern match at Affjax (line 274, column 18 - line 283, column 57): "+[t.responseFormat.constructor.name])}(),a=function(c){if(c instanceof em)return new R(c.value0(va));if(c instanceof am)return new R(va(c.value0));if(c instanceof om)return new R(va(c.value0));if(c instanceof um)return new R(va(c.value0));if(c instanceof im)return new R(va(c.value0));if(c instanceof al)return Hf("Body contains values that cannot be encoded as application/x-www-form-urlencoded")(m(rt)(va)(Am(c.value0)));if(c instanceof ol)return new R(va(dl(c.value0)));throw new Error("Failed pattern match at Affjax (line 235, column 20 - line 250, column 69): "+[c.constructor.name])},u=function(c){return function(s){return c instanceof d&&!ta(en)(ur)(Pf(cn(Ze))(ul)(c.value0))(s)?hc(s)(c.value0):s}},i=function(c){return u(m(rt)(of.create)(Ie(xr)(fm)(c)))(u(m(rt)(af.create)(_m(t.responseFormat)))(t.headers))},f=function(c){return{method:Pm(t.method),url:t.url,headers:m(lt)(function(s){return{field:ul(s),value:lm(s)}})(i(t.content)),content:c,responseType:sm(t.responseFormat),username:Oo(t.username),password:Oo(t.password),withCredentials:t.withCredentials,timeout:or(0)(m(rt)(function(s){return s})(t.timeout))}},v=function(c){return Qr(Cl)(cf(Km)(ov(nm(n,"AffjaxTimeoutErrorMessageIdent","AffjaxRequestFailedMessageIdent",dm.create,f(c)))))(function(s){if(s instanceof R){var l=Tm(e(s.value0.body));if(l instanceof H)return new H(new Nl(Om(l.value0),s.value0));if(l instanceof R)return new R({body:l.value0,headers:s.value0.headers,status:s.value0.status,statusText:s.value0.statusText});throw new Error("Failed pattern match at Affjax (line 209, column 9 - line 211, column 52): "+[l.constructor.name])}if(s instanceof H)return new H(function(){var o=Lu(s.value0),p=o==="AffjaxTimeoutErrorMessageIdent";if(p)return Rl.value;var S=o==="AffjaxRequestFailedMessageIdent";return S?kl.value:new Ol(s.value0)}());throw new Error("Failed pattern match at Affjax (line 207, column 144 - line 219, column 28): "+[s.constructor.name])})};if(t.content instanceof y)return v(Oo(y.value));if(t.content instanceof d){var _=a(t.content.value0);if(_ instanceof R)return v(Oo(new d(_.value0)));if(_ instanceof H)return D(yf)(new H(new Pl(_.value0)));throw new Error("Failed pattern match at Affjax (line 199, column 7 - line 203, column 48): "+[_.constructor.name])}throw new Error("Failed pattern match at Affjax (line 195, column 3 - line 203, column 48): "+[t.content.constructor.name])}},Wl=function(n){if(n instanceof Pl)return"There was a problem with the request content: "+n.value0;if(n instanceof Nl)return"There was a problem with the response body: "+hf(n.value0);if(n instanceof Rl)return"There was a problem making the request: timeout";if(n instanceof kl)return"There was a problem making the request: request failed";if(n instanceof Ol)return"There was a problem making the request: "+Lu(n.value0);throw new Error("Failed pattern match at Affjax (line 113, column 14 - line 123, column 66): "+[n.constructor.name])},Da=function(){return{method:new H(Ou.value),url:"/",headers:[],content:y.value,username:y.value,password:y.value,withCredentials:!1,responseFormat:mm,timeout:y.value}}();var Ul={newXHR:function(){return new XMLHttpRequest},fixupUrl:function(n){return n||"/"}};var gv=Dv(Ul);var Tv=function(){function n(){}return n.value=new n,n}(),Hl=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),ah=function(){return M.value}(),bv="Click to get some random user data.",oh=function(n){return nt(L(function(){return n(Tv.value)(),Ym(b(El)(gv({method:new H(Ou.value),url:"https://randomuser.me/api/",headers:Da.headers,content:Da.content,username:Da.username,password:Da.password,withCredentials:Da.withCredentials,responseFormat:pm,timeout:Da.timeout}))(function(r){if(r instanceof H)return me(Fl)(n(new Hl("GET /api response failed to decode: "+Wl(r.value0))));if(r instanceof R)return me(Fl)(n(new Hl(Dl(2)(r.value0.body))));throw new Error("Failed pattern match at Deku.Example.Docs.Effects (line 43, column 9 - line 50, column 48): "+[r.constructor.name])}))()}))},Cv=function(n){return function(t){return Nt({reflectType:function(){return`<div>
  <h1>Effects</h1>

  <h2>Let's make a network call</h2>
  <p>
    This example is similar to the previous one in its design: the looping function is called in response to an event. The difference is that the response isn't immediate. Instead, we wait for the result of a network call.
  </p>

  ~code~

  <p>And here's what it produces:</p>

  <blockquote> ~result~ </blockquote>

  <h2>Arbitrary effects</h2>
  <p>Because all event listeners execute in the <code>Effect</code> monad, you can do more or less whatever you want. Make a network call, run a monad transformer stack just for fun, play music using <a href="https://github.com/mikesol/purescript-wags">purescript-wags</a>. The sky's the limit!</p>

  <p>Another useful pattern when working with effects is to throttle input. For example, if we are making a network call, we may want to show a loading indicator and prevent additional network calls. This can be achieved by setting the callback to a no-op while the network call is executing, as shown in the example above.</p>

  <h2>Next steps</h2>
  <p>It is also possible to handle events (and by extension effectful actions in events, like network calls) in Pursx. Let's see how in the <a ~next~ style="cursor:pointer;">second Pursx section</a>.</p>
</div>`}})()()(Vn()(qt()(Vn()(At(t.MonadST5().Monad0().Applicative0()))({reflectType:function(){return"result"}})({reflectSymbol:function(){return"result"}})(t))({reflectType:function(){return"next"}})({reflectSymbol:function(){return"next"}})(t))({reflectType:function(){return"code"}})({reflectSymbol:function(){return"code"}})(t))(t)(ah)({code:zn(wt(t)([xt(t)([Sn(t.MonadST5().Monad0())(`module Main where

import Prelude

import Affjax.ResponseFormat as ResponseFormat
import Affjax.Web as AX
import Control.Alt ((<|>))
import Data.Argonaut.Core (stringifyWithIndent)
import Data.Either (Either(..))
import Data.Filterable (compact, filterMap)
import Data.HTTP.Method (Method(..))
import Data.Maybe (Maybe(..))
import Data.Profunctor (lcmap)
import Data.Tuple.Nested ((/\\))
import Deku.Attribute (Cb, cb, (:=))
import Deku.Control (text)
import Deku.DOM as D
import Deku.Toplevel (runInBody1)
import Effect (Effect)
import Effect.Aff (launchAff_)
import Effect.Class (liftEffect)
import FRP.Event (bang, bus, mapAccum)

data UIAction = Initial | Loading | Result String

clickCb :: (UIAction -> Effect Unit) -> Cb
clickCb push = cb
  ( const do
      push Loading
      launchAff_ $ do
        result <- AX.request
          ( AX.defaultRequest
              { url = "https://randomuser.me/api/"
              , method = Left GET
              , responseFormat = ResponseFormat.json
              }
          )
        case result of
          Left err -> liftEffect $ push
            $ Result
              ( "GET /api response failed to decode: " <>
                  AX.printError err
              )
          Right response -> liftEffect $ push $ Result $
            stringifyWithIndent 2 response.body
  )

clickText = "Click to get some random user data." :: String

main :: Effect Unit
main = runInBody1
  ( bus \\push -> lcmap (bang Initial <|> _)
      \\event ->
        let
          loadingOrResult = filterMap
            ( case _ of
                Loading -> Just $ Left unit
                Result s -> Just $ Right s
                _ -> Nothing
            )
            event
          loading = filterMap
            ( case _ of
                Left _ -> Just unit
                _ -> Nothing
            )
            loadingOrResult
          result = filterMap
            ( case _ of
                Right s -> Just s
                _ -> Nothing
            )
            loadingOrResult
        in
          D.div_
            [ D.div_
                [ D.button (bang (D.OnClick := clickCb push))
                    [ text
                        ( bang clickText
                            <|> (loading $> "Loading...")
                            <|> (result $> clickText)
                        )
                    ]
                ]
            , D.div
                ( (bang (D.Style := "display: none;")) <|>
                    ( compact
                        ( mapAccum
                            ( \\_ b -> (b && false) /\\
                                if b then Just unit else Nothing
                            )
                            result
                            true
                        ) $> (D.Style := "display: block;")
                    )
                )
                [ D.pre_ [ D.code_ [ text (bang "" <|> result) ] ] ]
            ]
  )
`)])])),result:zn(ho(t)(t.Always2())(function(r){return function(e){var a=vr(le(t.MonadST5().Monad0().Applicative0()))(function(f){return f instanceof Tv?new d(new H(void 0)):f instanceof Hl?new d(new R(f.value0)):y.value})(e),u=vr(le(t.MonadST5().Monad0().Applicative0()))(function(f){return f instanceof R?new d(f.value0):y.value})(a),i=vr(le(t.MonadST5().Monad0().Applicative0()))(function(f){return f instanceof H?new d(void 0):y.value})(a);return On(t)([On(t)([yr(t)($(t.MonadST5().Monad0().Applicative0())(O(mt)(et.value)(oh(r))))([Rr(t.MonadST5().Monad0())(z($n(t.MonadST5().Monad0().Applicative0()))($(t.MonadST5().Monad0().Applicative0())(bv))(z($n(t.MonadST5().Monad0().Applicative0()))(Wr(Kn)(i)("Loading..."))(Wr(Kn)(u)(bv))))])]),Zc(t)(z($n(t.MonadST5().Monad0().Applicative0()))($(t.MonadST5().Monad0().Applicative0())(O(Yc)(lr.value)("display: none;")))(Wr(Kn)($a(bu(t.MonadST5().Monad0().Applicative0()))(Pa(Ft(t.MonadST5()))(function(f){return function(v){return new C(v&&!1,function(){return v?new d(void 0):y.value}())}})(u)(!0)))(O(Yc)(lr.value)("display: block;"))))([wt(t)([xt(t)([Rr(t.MonadST5().Monad0())(z($n(t.MonadST5().Monad0().Applicative0()))($(t.MonadST5().Monad0().Applicative0())(""))(u))])])])])}})),next:ft(en)(k(t.MonadST5().Monad0().Applicative0()))($(t.MonadST5().Monad0().Applicative0()))([O(mt)(et.value)(nt(function(r){return rn(Yn)(rn(Yn)(Rt(r))(n.dpage(So.value)))(Kt)})),O(Pt)($t.value)(n.slug+"pursx2/")])})}};var Ef=function(){function n(){}return n.value=new n,n}();var Ff={attr:function(n){return function(t){return _t({key:"input",value:Oa(t)})}}};function Bl(n){return function(){return n.value}}function ql(n){return function(){return n.valueAsNumber}}function Fv(n,t,r,e){if(typeof window<"u"){var a=window[r];if(a!=null&&e instanceof a)return t(e)}for(var u=e;u!=null;){var i=Object.getPrototypeOf(u),f=i.constructor.name;if(f===r)return t(e);if(f==="Object")return n;u=i}return n}var A=function(n){return function(t){return Fv(y.value,d.create,n,t)}};var Mf=A("HTMLInputElement");var xf=function(n){var t=z($n(n))($(n)(O(Yi)(wo.value)("range"))),r=m(Kn)(function(e){return O(Ff)(Ef.value)(nt(function(a){return ir(mr)(Wt)(b(xr)(rf(a))(Mf))(ai(La)(ql)(e))}))});return function(e){return t(r(e))}},wf=function(n){return function(t){return function(r){return m(n)(function(){var e=O(r)(et.value);return function(a){return e(function(u){return u(bn(t))}(a))}}())}}};var lh=function(){return M.value}(),wv=function(n){return function(t){return Nt({reflectType:function(){return`<div>
  <h1>Events</h1>

  <h2>Listening to the DOM</h2>
  <p>
    We'll spice up the previous example by adding an event listener to our button. When we do, Deku will keep track of how many times we clicked it. The same goes for a range slider, whose current value is displayed underneath it.
  </p>

  ~code~

  <p>And here's what it produces:</p>

  <blockquote> ~result~ </blockquote>

  <h2>Event handling</h2>
  <p>All DOM event handlers, like <code>OnClick</code> and <code>OnInput</code>, can be set with a value of type <code>Cb</code>. This type is a <code>newtype</code> around <code>(Event -> Effect Boolean)</code>. To hook the event up to the Deku event bus, you can use the <code>push</code> function within the event handler. The push function has a signature of <code>(push -> Effect Unit)</code>. Here, the type one can push in to <code>push</code> is UIEvents. Whenever a push happens, our <code>Event</code> receives it and all attributes are updated accordingly.</p>

  <h2>Next steps</h2>
  <p>In this section, saw how to react to events. In the next section, we'll use a similar mechanism to deal with arbitrary <a ~next~ style="cursor:pointer;">effects</a>.</p>
</div>`}})()()(Vn()(qt()(Vn()(At(t.MonadST5().Monad0().Applicative0()))({reflectType:function(){return"result"}})({reflectSymbol:function(){return"result"}})(t))({reflectType:function(){return"next"}})({reflectSymbol:function(){return"next"}})(t))({reflectType:function(){return"code"}})({reflectSymbol:function(){return"code"}})(t))(t)(lh)({code:zn(wt(t)([xt(t)([Sn(t.MonadST5().Monad0())(`module Main where

import Prelude

import Control.Alt ((<|>))
import Deku.Control (text, text_)
import Deku.DOM as D
import Deku.Listeners (click_, slider)
import Deku.Toplevel (runInBody1)
import Effect (Effect)
import FRP.Event (bang, fold)
import FRP.Event.VBus (V, vbus)
import Type.Proxy (Proxy(..))

type UIEvents = V
  ( buttonClicked :: Unit
  , sliderMoved :: Number
  )

main :: Effect Unit
main = runInBody1
  ( vbus (Proxy :: _ UIEvents) \\push event -> do
      D.div_
        [ D.button
            (click_ (bang push.buttonClicked))
            [ text_ "Click" ]
        , D.div_
            [ text
                ( bang "Val: 0" <|>
                    ( append "Val: " <<< show
                        <$> fold
                          (const (add 1))
                          (bang unit <|> event.buttonClicked)
                          (-1)
                    )
                )
            ]
        , D.div_
            [ D.input
                (slider (bang push.sliderMoved))
                []
            , D.div_
                [ text
                    ( bang "Val: 50" <|>
                        ( append "Val: " <<< show
                            <$> event.sliderMoved
                        )
                    )
                ]
            ]
        ]
  )
`)])])),result:zn(zi()(t)()(fo({reflectSymbol:function(){return"buttonClicked"}})(co(lo(t.Always2())))(fo({reflectSymbol:function(){return"sliderMoved"}})(co(lo(t.Always2())))(Ti)()())()())(bo({reflectSymbol:function(){return"buttonClicked"}})()()(bo({reflectSymbol:function(){return"sliderMoved"}})()()(ki)()()()())()()()())(M.value)(function(r){return function(e){return On(t)([yr(t)(wf(Kn)(zr)(Mo)($(t.MonadST5().Monad0().Applicative0())(r.buttonClicked)))([Sn(t.MonadST5().Monad0())("Click")]),On(t)([Rr(t.MonadST5().Monad0())(z($n(t.MonadST5().Monad0().Applicative0()))($(t.MonadST5().Monad0().Applicative0())("Val: 0"))(m(Kn)(function(){var a=F(Ae)("Val: "),u=N(qr);return function(i){return a(u(i))}}())(fa(Ft(t.MonadST5()))(L(Ot(Sr)(1)))(z($n(t.MonadST5().Monad0().Applicative0()))($(t.MonadST5().Monad0().Applicative0())(void 0))(e.buttonClicked))(-1))))]),On(t)([pa(t)(xf(t.MonadST5().Monad0().Applicative0())($(t.MonadST5().Monad0().Applicative0())(r.sliderMoved)))([]),On(t)([Rr(t.MonadST5().Monad0())(z($n(t.MonadST5().Monad0().Applicative0()))($(t.MonadST5().Monad0().Applicative0())("Val: 50"))(m(Kn)(function(){var a=F(Ae)("Val: "),u=N(Zo);return function(i){return a(u(i))}}())(e.sliderMoved)))])])])}})),next:ft(en)(k(t.MonadST5().Monad0().Applicative0()))($(t.MonadST5().Monad0().Applicative0()))([O(mt)(et.value)(nt(function(r){return rn(Yn)(rn(Yn)(Rt(r))(n.dpage(Po.value)))(Kt)})),O(Pt)($t.value)(n.slug+"effects/")])})}};var Av=function(){function n(){}return n.value=new n,n}();var Lv={attr:function(n){return function(t){return _t({key:"keyup",value:Oa(t)})}}};function zl(n){return n.code}var Iv=A("KeyboardEvent");var dh=function(){function n(){}return n.value=new n,n}(),Vl=function(){function n(){}return n.value=new n,n}(),Sv=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),Dh=function(){return M.value}(),$v=function(n){return function(t){return Nt({reflectType:function(){return`<div>
  <h1>Events 2</h1>

  <h2>Dynamic children</h2>
  <p>
    Up until now, our DOM has been static. This is OK in some cases, but in many cases, we need a dynamic DOM: one whose elements are inserted and removed based on user interaction. In Deku, we achieve this with <code>Event</code>-s.
  </p>

  <p>
    The code below creates a todo list that allows a user to add, prioritize, and remove elements.
  </p>

  ~code~

  <p>And here's what it produces:</p>

  <blockquote> ~result~ </blockquote>

  <h2>Events of events</h2>

  <p>In the previous sections, DOM element constructors like <code>div_</code> could only accept an <code>Array</code>. They <i>also</i> can accept an event of events. In this case, the outer event represents a dynamic element, and the inner event represents the <i>stage</i> of dynamism with a data type called <code>Child</code>. <code>Child</code> has three constructors:</p>

  <ul>
    <li><code>insert</code>, which takes an element.</li>
    <li><code>sendToTop</code>, which sends the current element to the top of its parent.</li>
    <li><code>remove</code>, which removes the element from its parent.</li>
  </ul>

  <p>The Deku engine listens for these in a specific order. <code>Insert</code> can be followed by 0 or more <code>SendToTop</code>-s. When a <code>Remove</code> is called, the stream is unsubscribed from the parent. Because we're in the land of <code>Event</code>-s, you can emit anything, but this is the how they will be listened to.</p>

  <h2>Next steps</h2>
  <p>In this section, we used nested events to insert and remove elements from a parent. In the next section, we'll see how we can use <a ~next~ style="cursor:pointer;">portals to move an element to a different place of the DOM</a>.</p>
</div>`}})()()(Vn()(qt()(Vn()(At(t.MonadST5().Monad0().Applicative0()))({reflectType:function(){return"result"}})({reflectSymbol:function(){return"result"}})(t))({reflectType:function(){return"next"}})({reflectSymbol:function(){return"next"}})(t))({reflectType:function(){return"code"}})({reflectSymbol:function(){return"code"}})(t))(t)(Dh)({code:zn(wt(t)([xt(t)([Sn(t.MonadST5().Monad0())(`module Main where

import Prelude

import Control.Alt ((<|>))
import Data.Filterable (filterMap)
import Data.Foldable (for_, oneOfMap)
import Data.Maybe (Maybe(..))
import Data.Profunctor (lcmap)
import Data.Tuple.Nested ((/\\))
import Deku.Attribute (cb, (:=))
import Deku.Control (text_)
import Deku.Core (Child(..), dyn)
import Deku.DOM as D
import Deku.Toplevel (runInBody1)
import Effect (Effect)
import FRP.Event (bang, bus, keepLatest, mapAccum)
import Web.Event.Event (target)
import Web.HTML.HTMLInputElement (fromEventTarget, value)
import Web.UIEvent.KeyboardEvent (code, fromEvent)

data MainUIAction
  = UIShown
  | AddTodo
  | ChangeText String

data TodoAction = Prioritize | Delete

main :: Effect Unit
main = runInBody1
  ( bus \\push -> lcmap (bang UIShown <|> _) \\event -> do
      let
        top =
          [ D.input
              ( oneOfMap bang
                  [ D.OnInput := cb \\e -> for_
                      ( target e
                          >>= fromEventTarget
                      )
                      ( value
                          >=> push <<< ChangeText
                      )
                  , D.OnKeyup := cb
                      \\e -> for_ (fromEvent e) \\evt -> do
                        when (code evt == "Enter") $ do
                          push AddTodo
                  ]
              )
              []
          , D.button
              (bang $ D.OnClick := push AddTodo)
              [ text_ "Add" ]
          ]
      D.div_
        [ D.div_ top
        , D.div_
            [ dyn $
                map
                  ( \\txt -> keepLatest $ bus \\p' e' ->
                      ( bang $ Insert $ D.div_
                          [ text_ txt
                          , D.button
                              ( bang
                                  $ D.OnClick := p' SendToTop
                              )
                              [ text_ "Prioritize" ]
                          , D.button
                              ( bang
                                  $ D.OnClick := p' Remove
                              )
                              [ text_ "Delete" ]
                          ]
                      ) <|> e'
                  )
                  ( filterMap
                      ( \\(tf /\\ s) ->
                          if tf then Just s else Nothing
                      )
                      ( mapAccum
                          ( \\a b -> case a of
                              ChangeText s -> s /\\ (false /\\ s)
                              AddTodo -> b /\\ (true /\\ b)
                              _ -> "" /\\ (false /\\ "")
                          )
                          event
                          ""
                      )
                  )
            ]
        ]
  )
`)])])),result:zn(ho(t)(t.Always2())(function(r){return Ar(dr)(function(e){return z($n(t.MonadST5().Monad0().Applicative0()))($(t.MonadST5().Monad0().Applicative0())(dh.value))(e)})(function(e){return On(t)([On(t)([pa(t)(ft(en)(k(t.MonadST5().Monad0().Applicative0()))($(t.MonadST5().Monad0().Applicative0()))([O(Up)(lr.value)("border-style:solid;border-width: 1px;border-color: black;"),O(Ff)(Ef.value)(nt(function(a){return ir(mr)(Wt)(b(xr)(rf(a))(Mf))(ai(La)(Bl)(function(u){return r(Sv.create(u))}))})),O(Lv)(Av.value)(nt(function(a){return ir(mr)(Wt)(Iv(a))(function(u){return xe(mr)(zl(u)==="Enter")(r(Vl.value))})}))]))([]),yr(t)(z($n(t.MonadST5().Monad0().Applicative0()))($(t.MonadST5().Monad0().Applicative0())(O(Gi)(lr.value)("margin: 5px;")))($(t.MonadST5().Monad0().Applicative0())(O(mt)(et.value)(nt(L(r(Vl.value)))))))([Sn(t.MonadST5().Monad0())("Add")])]),On(t)([Ra(m(Kn)(function(a){return go(Ft(t.MonadST5()))(ka(t)(t.Always2())(function(u){return function(i){return z($n(t.MonadST5().Monad0().Applicative0()))($(t.MonadST5().Monad0().Applicative0())(Co(On(t)([Wa(t)($(t.MonadST5().Monad0().Applicative0())(O(xo)(lr.value)("margin: 5px;")))([Sn(t.MonadST5().Monad0())(a)]),yr(t)(z($n(t.MonadST5().Monad0().Applicative0()))($(t.MonadST5().Monad0().Applicative0())(O(Gi)(lr.value)("margin: 5px;")))($(t.MonadST5().Monad0().Applicative0())(O(mt)(et.value)(nt(L(u(Ep)))))))([Sn(t.MonadST5().Monad0())("Prioritize")]),yr(t)(z($n(t.MonadST5().Monad0().Applicative0()))($(t.MonadST5().Monad0().Applicative0())(O(Gi)(lr.value)("margin: 5px;")))($(t.MonadST5().Monad0().Applicative0())(O(mt)(et.value)(nt(L(u(Fp)))))))([Sn(t.MonadST5().Monad0())("Delete")])]))))(i)}}))})(vr(le(t.MonadST5().Monad0().Applicative0()))(function(a){return a.value0?new d(a.value1):y.value})(Pa(Ft(t.MonadST5()))(function(a){return function(u){return a instanceof Sv?new C(a.value0,new C(!1,a.value0)):a instanceof Vl?new C(u,new C(!0,u)):new C("",new C(!1,""))}})(e)(""))))])])})})),next:ft(en)(k(t.MonadST5().Monad0().Applicative0()))($(t.MonadST5().Monad0().Applicative0()))([O(mt)(et.value)(nt(function(r){return rn(Yn)(rn(Yn)(Rt(r))(n.dpage(Ro.value)))(Kt)})),O(Pt)($t.value)(n.slug+"portals/")])})}};var gh=function(){return M.value}(),Pv=function(n){return function(t){return Nt({reflectType:function(){return`<div>
  <h1>Hello world</h1>

  <h3>A small example</h3>

  <p>Here is "hello world" in Deku. In this and all the following sections, we'll start with a full example, and we'll pick it apart afterwards.</p>

  ~code~

  <p>And here's what it produces:</p>

  <blockquote> ~result~ </blockquote>

  <p>You gotta start somewhere!</p>

  <h2>Our top-level component</h2>

  <p>Deku sets up shop in an arbitrary DOM component. In the main function above, we use \u{1F680} to automatically insert our Deku tree into the body.</p>

  <h2>Next steps</h2>
  <p>Now that we have our setup running, let's make a more interesting <a ~next~ style="cursor:pointer;">component</a>.</p>
</div>`}})()()(Vn()(qt()(Vn()(At(t.MonadST5().Monad0().Applicative0()))({reflectType:function(){return"result"}})({reflectSymbol:function(){return"result"}})(t))({reflectType:function(){return"next"}})({reflectSymbol:function(){return"next"}})(t))({reflectType:function(){return"code"}})({reflectSymbol:function(){return"code"}})(t))(t)(gh)({code:zn(wt(t)([xt(t)([Sn(t.MonadST5().Monad0())(`module Main where

import Prelude

import Deku.Control (text_)
import Deku.Toplevel (runInBody)
import Effect (Effect)

main :: Effect Unit
main = runInBody (text_ "Hello world")
`)])])),result:zn(On(t)([Sn(t.MonadST5().Monad0())("Hello world")])),next:ft(en)(k(t.MonadST5().Monad0().Applicative0()))(ca(Ft(t.MonadST5())))([O(mt)(et.value)(nt(function(r){return rn(Yn)(rn(Yn)(Rt(r))(n.dpage(Lo.value)))(Kt)})),O(Pt)($t.value)(n.slug+"component/")])})}};var Th=function(){return M.value}(),Nv=function(n){return function(t){return Nt({reflectType:function(){return`<div>
  <h1>Deku</h1>

  <h3>A web micro-framework written in PureScript</h3>

  <p>Hi! You've found <a href="https://github.com/mikesol/purescript-deku">Deku</a>.</p>

  <p>Deku is the coolest web micro-framework that no one knows about yet. Except you, of course, as you're here. So welcome!</p>

  <p>The main goal of Deku is speed. I made it for the purpose of creating interactive web-based musical instruments, but it's equally useful as a general-purpose web framework. Its standard event-handling patterns tend to outperform those of React and Vue by a factor of 1.5-2x.</p>

  <p>This documentation is written in Deku and can be found <a href="https://github.com/mikesol/purescript-deku/tree/main/examples/docs">here</a>. One good way to follow along is by using the Deku starter repo, which you can clone <a href="https://github.com/mikesol/purescript-deku-starter">here</a>.</p>

  <p>And now, without further ado, check out the <a ~next~ style="cursor:pointer;">hello world section</a>!</p>
</div>`}})()()(qt()(At(t.MonadST5().Monad0().Applicative0()))({reflectType:function(){return"next"}})({reflectSymbol:function(){return"next"}})(t))(t)(Th)({next:ft(en)(k(t.MonadST5().Monad0().Applicative0()))(ca(Ft(t.MonadST5())))([O(mt)(et.value)(nt(function(r){return rn(Yn)(rn(Yn)(Rt(r))(n.dpage(Ao.value)))(Kt)})),O(Pt)($t.value)(n.slug+"hello/")])})}};var Rv=function(){function n(){}return n.value=new n,n}(),kv={attr:function(n){return function(t){return _t({key:"controls",value:Zt(t)})}}};var Ov=function(){function n(){}return n.value=new n,n}();var Wv={attr:function(n){return function(t){return _t({key:"src",value:Zt(t)})}}};var Uv=function(){function n(){}return n.value=new n,n}(),Hv={attr:function(n){return function(t){return _t({key:"width",value:Zt(t)})}}};var Bv=function(n){return function(t){return function(r){return new Tn(Hn(n)("source")(t)(it(r)))}}};var qv=function(n){return function(t){return function(r){return new Tn(Hn(n)("video")(t)(it(r)))}}};var wh=function(){return M.value}(),zv=function(n){return function(t){return Nt({reflectType:function(){return`<div>
  <h1>Portals</h1>

  <h2>Zapping from place to place</h2>
  <p>
    Sometimes, we have referentially opaque nodes like videos or audio that we can't destroy and recreate when they need to move around the DOM. In these cases, we can use portals to "zap" nodes from one part of the DOM to another.
  </p>

  <p>
    The code below uses portals to flip two videos across a boundary. If you press play on either video, you'll see that it keeps playing uninterrupted, event when it is removed and reinserted.
  </p>

  ~code~

  <p>And here's what it produces:</p>

  <blockquote> ~result~ </blockquote>

  <h2>Events of portals</h2>

  <p>Portals work by sending a referentially-opaque reference to a DOM element into a closure where it can be safely used. Whenever an event is emitted containing the element, the element will be rendered at that place in the DOM, as in the example above. Note that portals "hog the blanket", meaning that they end up in the last place in which they were called.</p>

  <p><code>switcher</code> is a <a href="https://github.com/mikesol/purescript-deku/blob/ff3e2d2dc89b39088c5d5d6ab3492fb8730dd9a4/src/Deku/Control.purs#L325">small function</a> included in Deku to switch between different elements in an enclosure. It's how the tabs in this documentation are implemented as well.</p>

  <h2>Next steps</h2>
  <p>In this section, we used portals to move an element to different areas of the DOM. In the next section, we'll learn how to do <a ~next~ style="cursor:pointer;">static site rendering</a>.</p>
</div>`}})()()(Vn()(qt()(Vn()(At(t.MonadST5().Monad0().Applicative0()))({reflectType:function(){return"result"}})({reflectSymbol:function(){return"result"}})(t))({reflectType:function(){return"next"}})({reflectSymbol:function(){return"next"}})(t))({reflectType:function(){return"code"}})({reflectSymbol:function(){return"code"}})(t))(t)(wh)({code:zn(wt(t)([xt(t)([Sn(t.MonadST5().Monad0())(`module Main where

import Prelude

import Control.Alt ((<|>))
import Data.Foldable (oneOfMap)
import Data.Profunctor (lcmap)
import Data.Tuple.Nested ((/\\), type (/\\))
import Data.FastVect.FastVect (index, (:))
import Data.FastVect.FastVect as V
import Deku.Attribute ((:=))
import Deku.Control (portal, switcher, text_)
import Deku.DOM as D
import Deku.Toplevel (runInBody1)
import Effect (Effect)
import FRP.Event (Event, bang, bus, fold, mapAccum)
import Type.Prelude (Proxy(..))

counter :: forall a. Event a \u2192 Event (a /\\ Int)
counter event = mapAccum f event 0
  where
  f a b = (b + 1) /\\ (a /\\ b)

main :: Effect Unit
main = runInBody1
  ( bus \\push -> lcmap  (bang unit <|> _) \\event -> do
      portal
        ( map
            ( \\i -> D.video
                (oneOfMap bang [ D.Controls := "true", D.Width := "250" ])
                [D.source
                    (oneOfMap bang [ D.Src := i, D.Xtype := "video/mp4" ])
                    []
                ]
            )
            ( "https://interactive-examples.mdn.mozilla.net/media/cc0-videos/flower.mp4"
                : "https://www.w3schools.com/jsref/movie.mp4"
                : V.empty
            )
        )
        \\v _ -> do
          let
            p0 = index (Proxy :: _ 0) v
            p1 = index (Proxy :: _ 1) v
            ev = fold (const not) event
            flips = switcher (if _ then p0 else p1) <<< ev
          D.div_
            [ D.button (bang $ D.OnClick := push unit)
                [ text_ "Switch videos" ]
            , D.div_ [ D.span_ [flips true], D.span_ [flips false] ]
            ]
  )
`)])])),result:zn(Ra(ka(t)(t.Always2())(function(r){return Ar(dr)(z($n(t.MonadST5().Monad0().Applicative0()))($(t.MonadST5().Monad0().Applicative0())(void 0)))(function(e){return $(t.MonadST5().Monad0().Applicative0())(Co(Op()(t)(m(Eo)(function(a){return qv(t)(ft(en)(k(t.MonadST5().Monad0().Applicative0()))($(t.MonadST5().Monad0().Applicative0()))([O(kv)(Rv.value)("true"),O(Hv)(Uv.value)("250")]))([Bv(t)(ft(en)(k(t.MonadST5().Monad0().Applicative0()))($(t.MonadST5().Monad0().Applicative0()))([O(Wv)(Ov.value)(a),O(qp)(wo.value)("video/mp4")]))([])])})(qc()()("https://interactive-examples.mdn.mozilla.net/media/cc0-videos/flower.mp4")(qc()()("https://www.w3schools.com/jsref/movie.mp4")(Lp))))(function(a){return function(u){var i=Bc()()()()()({reflectType:function(){return 1}})(M.value)(a),f=Bc()()()()()({reflectType:function(){return 0}})(M.value)(a),v=fa(Ft(t.MonadST5()))(L(Jr(ur)))(e),_=function(){var c=hu(t.MonadST5())(function(s){return s?f:i});return function(s){return c(v(s))}}();return On(t)([yr(t)($(t.MonadST5().Monad0().Applicative0())(O(mt)(et.value)(nt(L(r(void 0))))))([Sn(t.MonadST5().Monad0())("Switch videos")]),On(t)([wu(t)([_(!0)]),wu(t)([_(!1)])])])}})))})}))),next:ft(en)(k(t.MonadST5().Monad0().Applicative0()))($(t.MonadST5().Monad0().Applicative0()))([O(mt)(et.value)(nt(function(r){return rn(Yn)(rn(Yn)(Rt(r))(n.dpage(ko.value)))(Kt)})),O(Pt)($t.value)(n.slug+"ssr/")])})}};var Lh=function(){return M.value}(),Ih=function(){return M.value}(),Vv=function(n){return function(t){return Nt({reflectType:function(){return`<div>
  <h1>PursX 1</h1>

  <h2>Like JSX... but better!</h2>

  <p>Writing out PureScript code for the DOM only really makes sense if you're doing some sort of interesting manipulations on the JS layer. Otherwise, it's pretty tedious and longer than HTML. Thankfully, there's a solution: PursX.</p>

  <p>PursX takes its name from JSX and it accomplishes a similar goal: the ability to embed HTML in your document. In the example below, we create the same exact component from the previous article, but in PursX.</p>

  ~code~

  <p>Here's what it produces:</p>

  <blockquote> ~result~ </blockquote>

  <h2>Puurrrrrr ...sx</h2>

  <p>Static Pursx (meaning Pursx without any dynamic content) can be activated with the function <code>psx</code>.</p>

  <h2>Next steps</h2>
  <p>In this section, we used PursX to build the same component as the previous section. In the next section, we'll learn how to respond to <a ~next~ style="cursor:pointer;">events</a>.</p>
</div>`}})()()(Vn()(qt()(Vn()(At(t.MonadST5().Monad0().Applicative0()))({reflectType:function(){return"result"}})({reflectSymbol:function(){return"result"}})(t))({reflectType:function(){return"next"}})({reflectSymbol:function(){return"next"}})(t))({reflectType:function(){return"code"}})({reflectSymbol:function(){return"code"}})(t))(t)(Lh)({code:zn(wt(t)([xt(t)([Sn(t.MonadST5().Monad0())(`module Main where

import Prelude

import Deku.Pursx (psx)
import Deku.Toplevel (runInBody)
import Effect (Effect)
import FRP.Event (bang)
import Type.Proxy (Proxy(..))

myDom = Proxy :: Proxy """<div>
    <button>I do nothing</button>
    <ul>
        <li>A</li>
        <li>B</li>
        <li>C</li>
    </ul>
    <div>
        <a href="https://github.com/mikesol/purescript-deku"></a>
        <i>bar</i>
        <span style="font-weight:800;">baz</span>
    </div>
    <div><div></div><div><input type="range"/></div></div>
    </div>
"""

main :: Effect Unit
main = runInBody (psx myDom)
`)])])),result:zn(Xp({reflectType:function(){return`<div>
    <button>I do nothing</button>
    <ul>
        <li>A</li>
        <li>B</li>
        <li>C</li>
    </ul>
    <div>
        <a href="https://example.com">foo</a>
        <i>bar</i>
        <span style="font-weight:800;">baz</span>
    </div>
    <div><div></div><div><input type="range"/></div></div>
    </div>
`}})()(t)(At(t.MonadST5().Monad0().Applicative0()))(Ih)),next:ft(en)(k(t.MonadST5().Monad0().Applicative0()))(ca(Ft(t.MonadST5())))([O(mt)(et.value)(nt(function(r){return rn(Yn)(rn(Yn)(Rt(r))(n.dpage($o.value)))(Kt)})),O(Pt)($t.value)(n.slug+"events1/")])})}};var $h=function(){return M.value}(),Ph=function(){return M.value}(),Jv=function(n){return function(t){return rl({reflectType:function(){return`<div>
  <h1>Pursx 2</h1>

  <h2>Working with events and effects</h2>
  <p>
    PursX would be of limited utility if it could only render static content. In this section, we'll see how to make it dynamic, both by modifying existing elements and inserting entirely new ones.
  </p>

  <p>The example below is the same one from the Pursx 1 section with two differences. The first is that the background color of the second list item is set dynamically. The second is that there is a new button that is dynamically inserted.
  </p>

  ?code?

  <p>And here's what it produces:</p>

  <blockquote> ?result? </blockquote>

  <h2>Dynamism in static content</h2>
  <p>Named slots for dynamic content are added to PursX with between two tildes, like <code>~foo~</code>. This separator doesn't have to be a tilde - it can be set programatically as well (see the Deku/Pursx.purs module for an example of how that is done). Also, we no longer use the <code>psx</code> command. Instead, we use the infix operator <code>~~</code> followed by arguments to our template. In the case of dynamic attributes, the argument is a stream of attributes. In the case of a dynamic section, the arguments are of type <code>Element</code>.</p>

  <h2>Next steps</h2>
  <p>In more complicated apps, like this documentation, we'll need dynamic logic that allows for components to replace each other, for example in a navigation bar. In the next section, we'll see one way to do this by using <a ?next? style="cursor:pointer;">events to control the presence and absence of elements</a>.</p>
</div>`}})({reflectType:function(){return"?"}})()()(t)(Vn()(qt()(Vn()(At(t.MonadST5().Monad0().Applicative0()))({reflectType:function(){return"result"}})({reflectSymbol:function(){return"result"}})(t))({reflectType:function(){return"next"}})({reflectSymbol:function(){return"next"}})(t))({reflectType:function(){return"code"}})({reflectSymbol:function(){return"code"}})(t))(M.value)($h)({code:zn(wt(t)([xt(t)([Sn(t.MonadST5().Monad0())(`module Main where

import Prelude

import Control.Alt ((<|>))
import Data.Compactable (compact)
import Data.Maybe (Maybe(..))
import Deku.Attribute (cb, (:=))
import Deku.Control (text)
import Deku.DOM as D
import Deku.Pursx (nut, (~~))
import Deku.Toplevel (runInBody1)
import Effect (Effect)
import FRP.Event (bus, bang)
import Type.Proxy (Proxy(..))

myDom =
  Proxy :: Proxy """<div>
        <button>I do nothing</button>
        <ul>
          <li>A</li>
          <li ~myli~>B</li>
          <li>C</li>
        </ul>
        <div>
          <a href="https://github.com/mikesol/purescript-deku"></a>
          <i>bar</i>
          ~somethingNew~
          <span style="font-weight:800;">baz</span>
        </div>
        <div><div></div><div><input type="range"/></div></div>
      </div>
"""

main :: Effect Unit
main = runInBody1
  ( bus \\push event -> myDom ~~
      { myli: bang (D.Style := "background-color:rgb(200,240,210);")
      , somethingNew: nut
          ( D.button (bang (D.OnClick := push (Just unit)))
              [ text
                  $ (compact event $> "Thanks for clicking me!") <|>
                    bang "I was dynamically inserted"
              ]
          )
      }
  )`)])])),result:zn(Ra(ka(t)(t.Always2())(function(r){return function(e){return $(t.MonadST5().Monad0().Applicative0())(Co(Nt({reflectType:function(){return`<div>
        <button>I do nothing</button>
        <ul>
          <li>A</li>
          <li ~myli~>B</li>
          <li>C</li>
        </ul>
        <div>
          <a href="https://github.com/mikesol/purescript-deku"></a>
          <i>bar</i>
          ~somethingNew~
          <span style="font-weight:800;">baz</span>
        </div>
        <div><div></div><div><input type="range"/></div></div>
      </div>
`}})()()(qt()(Vn()(At(t.MonadST5().Monad0().Applicative0()))({reflectType:function(){return"somethingNew"}})({reflectSymbol:function(){return"somethingNew"}})(t))({reflectType:function(){return"myli"}})({reflectSymbol:function(){return"myli"}})(t))(t)(Ph)({myli:$(t.MonadST5().Monad0().Applicative0())(O(Wp)(lr.value)("background-color:rgb(200,240,210);")),somethingNew:zn(yr(t)($(t.MonadST5().Monad0().Applicative0())(O(Mo)(et.value)(r(new d(void 0)))))([Rr(t.MonadST5().Monad0())(z($n(t.MonadST5().Monad0().Applicative0()))(Wr(Kn)($a(bu(t.MonadST5().Monad0().Applicative0()))(e))("Thanks for clicking me!"))($(t.MonadST5().Monad0().Applicative0())("I was dynamically inserted")))]))})))}}))),next:ft(en)(k(t.MonadST5().Monad0().Applicative0()))($(t.MonadST5().Monad0().Applicative0()))([O(mt)(et.value)(nt(function(r){return rn(Yn)(rn(Yn)(Rt(r))(n.dpage(No.value)))(Kt)})),O(Pt)($t.value)(n.slug+"events2/")])})}};var Rh=function(n){return function(t){return function(r){return new Tn(Hn(n)("p")(t)(it(r)))}}},jv=function(n){return Rh(n)(ln(k(n.MonadST5().Monad0().Applicative0())))};var Gv=(n,t,r,e)=>{n(a=>e.units[a].main.appendChild(e.units[t].main))(r)},Xv=n=>t=>()=>{t.units[n.id].main.parentNode||t.units[n.parent].main.appendChild(t.units[n.id].main)},Qv=n=>t=>r=>()=>{var e,a=t.id;r.scopes[t.scope]||(r.scopes[t.scope]=[]),r.scopes[t.scope].push(a),n&&t.parent.value0&&(e=document.body.querySelectorAll("[data-deku-ssr-"+a+"]").item(0))?r.units[a]={listeners:{},parent:t.parent,scope:t.scope,main:e}:r.units[a]={listeners:{},parent:t.parent,scope:t.scope,main:document.createElement(t.tag)}},Yv=n=>t=>r=>e=>()=>{var a=r.id,u;e.scopes[r.scope]||(e.scopes[r.scope]=[]),e.scopes[r.scope].push(a),n&&r.parent.value0&&(u=document.body.querySelectorAll("[data-deku-ssr-"+r.parent.value0+"]").item(0))?e.units[a]={main:u.childNodes[0],parent:r.parent,scope:r.scope}:(e.units[a]={main:document.createTextNode(""),parent:r.parent,scope:r.scope},Gv(t,a,r.parent,e))};function Jl(){return{units:{},scopes:{}}}var Zv=n=>t=>r=>()=>{var e=t.id,a=t.value;n&&!r.units[e]&&(dom=document.body.querySelectorAll("[data-deku-ssr-"+e+"]").item(0))&&(r.units[e]={listeners:{},parent:t.parent,scope:t.scope,main:dom},r.scopes[t.scope]||(r.scopes[t.scope]=[]),r.scopes[t.scope].push(e)),r.units[e].main.tagName==="INPUT"&&t.key==="value"?r.units[e].main.value=a:r.units[e].main.tagName==="INPUT"&&t.key==="checked"?r.units[e].main.checked=a==="true":r.units[e].main.setAttribute(t.key,a)},Kv=n=>t=>r=>()=>{var e=t.id,a=t.value;if(n&&!r.units[e]&&(dom=document.body.querySelectorAll("[data-deku-ssr-"+e+"]").item(0))&&(r.units[e]={listeners:{},parent:t.parent,scope:t.scope,main:dom},r.scopes[t.scope]||(r.scopes[t.scope]=[]),r.scopes[t.scope].push(e)),t.key==="@self@")a(r.units[e].main)();else{r.units[e].listeners[t.key]&&r.units[e].main.removeEventListener(t.key,r.units[e].listeners[t.key]);var u=i=>a(i)();r.units[e].main.addEventListener(t.key,u),r.units[e].listeners[t.key]=u}},nd=n=>t=>()=>{var r=n.id;t.units[r].main.nodeValue=n.text},td=n=>t=>r=>e=>()=>{var a,u,i=r.id,f=r.html,v=r.verb,_=r.cache,c=r.parent,s=r.scope,l=r.pxScope;if(n&&r.parent.value0&&(a=document.body.querySelectorAll("[data-deku-ssr-"+i+"]").item(0)))e.units[i]={listeners:{},scope:s,parent:c,main:a};else{let p=Object.entries(_);for(var o=0;o<p.length;o++){let S=p[o][0];p[o][1]===!0?f=f.replace(v+S+v,'data-deku-attr-internal="'+S+'"'):f=f.replace(v+S+v,'<span style="display:contents;" data-deku-elt-internal="'+S+'"></span>')}u=document.createElement("div"),u.innerHTML=f.trim(),e.units[i]={listeners:{},scope:s,parent:c,main:u.firstChild}}e.scopes[s]||(e.scopes[s]=[]),e.scopes[s].push(i),u||(u=a),u.querySelectorAll("[data-deku-attr-internal]").forEach(function(p){var S=p.getAttribute("data-deku-attr-internal");let Cn=S+l;e.units[Cn]={listeners:{},main:p,scope:s},e.scopes[s].push(Cn)}),u.querySelectorAll("[data-deku-elt-internal]").forEach(function(p){var S=p.getAttribute("data-deku-elt-internal");let Cn=S+l;e.units[S+l]={listeners:{},main:p,scope:s},e.scopes[s].push(Cn)}),a||Gv(t,i,c,e)},rd=n=>t=>()=>{var r=n.id;t.units[r]={main:n.root}},ed=n=>t=>()=>{var r=n.id,e=n.parent;t.units[r].containingScope=n.scope,t.units[e].main.prepend(t.units[r].main)},ad=n=>t=>()=>{var r=n.id;t.units[r].noop||t.units[r].containingScope&&!n.scopeEq(t.units[r].containingScope)(n.scope)||t.units[r].main.remove()},od=n=>t=>()=>{delete t.units[n.id]},ud=n=>t=>()=>{var r=n.id;t.units[r].main.parentNode.prepend(t.units[r].main)};var id=function(n){return n};var Bh=1,jl=2147483647,qh=function(){return jl-1|0}(),Gl=function(n){var t=function(r){return function(e){return function(a){var u=e-r|0,i=Ko(ni)(a)(u),f=i<r;return f?i+e|0:i}}};return t(Bh)(qh)(n)};var zh=0,Vh=48271,fd=function(n){return function(t){return Mr()(Tf(Uu(gr(Vh)*gr(t)+gr(n))(gr(jl))))}},cd=fd(zh);var Zh=function(){function n(i){this.fn=i}var t={},r=function(i,f){this.head=i,this.tail=f};function e(i){return new r(i,t)}function a(i){return function(f){return new r(i,f)}}function u(i){for(var f=[],v=i;v!==t;)f.push(v.head),v=v.tail;return f}return function(i){return function(f){return function(v){var _=function(s,l){return i(f(a)(v(s)))(l)},c=function(s,l,o){if(l===0)return s;var p=o[l-1];return new n(function(){var S=c(_(p,s),l-1,o);return S})};return function(s){for(var l=f(e)(v(s[s.length-1])),o=c(l,s.length-1,s);o instanceof n;)o=o.fn();return f(u)(o)}}}}}();var Bo=function(n){return{map:function(t){return function(r){return function(e){return m(n)(function(a){return new C(t(a.value0),a.value1)})(r(e))}}}}};var Yl=function(n){return{Applicative0:function(){return qa(n)},Bind1:function(){return Af(n)}}},Af=function(n){return{bind:function(t){return function(r){return function(e){return b(n.Bind1())(t(e))(function(a){var u=r(a.value0);return u(a.value1)})}}},Apply0:function(){return Lf(n)}}},Lf=function(n){return{apply:jr(Yl(n)),Functor0:function(){return Bo(n.Bind1().Apply0().Functor0())}}},qa=function(n){return{pure:function(t){return function(r){return D(n.Applicative0())(new C(t,r))}},Apply0:function(){return Lf(n)}}};var Bu=function(n){return{state:function(t){var r=D(n.Applicative0());return function(e){return r(t(e))}},Monad0:function(){return Yl(n)}}};var Dd=function(n){return function(t){var r=n(t);return r.value1}},yd=function(n){return function(t){var r=n(t);return r.value0}};var m0=function(n){return n};var v0=function(){var n=function(t){return new C(id(t.newSeed),function(){var r={};for(var e in t)({}).hasOwnProperty.call(t,e)&&(r[e]=t[e]);return r.newSeed=cd(t.newSeed),r}())};return Me(Bu(ut))(n)}();var qu=Bo(de);var Kl=function(n){return yd(m0(n))};var Td=Lf(ut),bd=function(n){return function(t){var r=gr(t),e=gr(n),a=function(f){return e+Uu(f)(r-e+1)},u=m(qu)(gr)(v0),i=En(Td)(m(qu)(Ot(Qo))(u))(m(qu)(Yr(Qo)(2))(u));return m(qu)(function(f){return Il(a(f))})(i)}},Cd=function(n){return function(t){var r=n<=t;return r?bd(n)(t):bd(t)(n)}};var ns=function(n){return n.arbitrary};var ts=function(){return{arbitrary:Cd(-1e6)(1e6)}}();var zu=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),Vu=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),If=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),Sf=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),Ju=function(){function n(t){this.value0=t}return n.create=function(t){return new n(t)},n}(),D0=function(n){return function(t){return tn(Ct)(Qt(function(r){return F(dt)(r)([new Ju(n)])})(t))}},y0=function(n){return function(t){return tn(Ct)(Qt(function(r){return F(dt)(r)([new Sf(n)])})(t))}},g0=function(n){return function(t){return tn(Ct)(Qt(function(r){return F(dt)(r)([new Vu(n)])})(t))}},b0=function(n){return function(t){return tn(Ct)(Qt(function(r){return F(dt)(r)([new If(n)])})(t))}},T0=function(n){return function(t){return tn(Ct)(Qt(function(r){return F(dt)(r)([new zu(n)])})(t))}},Ed=function(n){return{ids:function(){var r=Tt(n)(),e=N(qr)(Kl(ns(ts))({newSeed:Gl(r),size:5}));return tn(Ct)(Qt(Ot(Sr)(1))(n))(),e},makeElement:T0,attributeParent:function(t){return function(r){return D(fr)(void 0)}},makeRoot:function(t){return function(r){return D(fr)(void 0)}},makeText:g0,makePursx:b0,setProp:y0,setCb:function(t){return function(r){return D(fr)(void 0)}},setText:D0,sendToTop:function(t){return function(r){return D(fr)(void 0)}},deleteFromCache:function(t){return function(r){return D(fr)(void 0)}},giveNewParent:function(t){return function(r){return D(fr)(void 0)}},disconnectElement:function(t){return function(r){return D(fr)(void 0)}}}},Fd=function(n){return{ids:function(){var r=_o(n)(),e=N(qr)(Kl(ns(ts))({newSeed:Gl(r),size:5}));return tn(In)(U_(Ot(Sr)(1))(n))(),e},makeElement:Qv(!0),attributeParent:Xv,makeRoot:rd,makeText:Yv(!0)(qn(void 0)),makePursx:td(!0)(qn(void 0)),setProp:Zv(!0),setCb:Kv(!0),setText:nd,sendToTop:ud,deleteFromCache:od,giveNewParent:ed,disconnectElement:ad}};var rs=({id:n,html:t,pxScope:r,cache:e,verb:a})=>{let u=t,i=Object.entries(e);for(var f=0;f<i.length;f++){let s=i[f][0];i[f][1]===!0?u=u.replace(a+s+a,'data-deku-attr-internal="'+s+'" data-deku-ssr-'+s+r+'="true"'):u=u.replace(a+s+a,'<span style="display:contents;" data-deku-elt-internal="'+s+'" data-deku-ssr-'+s+r+'="true"></span>')}let v=u.indexOf(">"),_=u.indexOf("/>"),c=_==v-1?_:v;return u.slice(0,c)+" data-deku-ssr-"+n+'="true" '+u.slice(c)};var xd=function(n){return function(t){var r=function(s){return function(l){return tn(Bo(de))(Uo(Bu(ut))(function(o){var p={};for(var S in o)({}).hasOwnProperty.call(o,S)&&(p[S]=o[S]);return p.idToActions=Do(Gt)(function(Cn){if(Cn instanceof d)return new d(F(dt)(Cn.value0)([l]));if(Cn instanceof y)return new d([l]);throw new Error("Failed pattern match at Deku.SSR (line 45, column 17 - line 47, column 45): "+[Cn.constructor.name])})(s)(o.idToActions),p}))}},e=function(s){return function(l){return function(o){return jn(Gn)(Af(ut))(tn(Bo(de))(Uo(Bu(ut))(function(p){var S={};for(var Cn in p)({}).hasOwnProperty.call(p,Cn)&&(S[Cn]=p[Cn]);return S.parentToChild=Do(Gt)(function(at){if(at instanceof d)return new d(F(dt)(at.value0)([l]));if(at instanceof y)return new d([l]);throw new Error("Failed pattern match at Deku.SSR (line 32, column 17 - line 34, column 41): "+[at.constructor.name])})(s)(p.parentToChild),S})))(function(){return r(l)(o)})}}},a=Dd(_r(ke)(qa(ut))(function(s){if(s instanceof zu)return ir(qa(ut))(Wt)(s.value0.parent)(function(l){return e(l)(s.value0.id)(s)});if(s instanceof Vu)return ir(qa(ut))(Wt)(s.value0.parent)(function(l){return e(l)(s.value0.id)(s)});if(s instanceof If)return ir(qa(ut))(Wt)(s.value0.parent)(function(l){return e(l)(s.value0.id)(s)});if(s instanceof Sf||s instanceof Ju)return r(s.value0.id)(s);throw new Error("Failed pattern match at Deku.SSR (line 55, column 17 - line 62, column 43): "+[s.constructor.name])})(t))({parentToChild:vo,idToActions:vo}),u=function(s){return Ga(Fc(function(l){return l instanceof zu||l instanceof Vu})(s))},i=function(s){return or("")(Ai(function(l){return l instanceof zu?new d(l.value0.tag):y.value})(s))},f=function(s){return Se(en)(nu)(" ")(vr(dp)(function(l){return l instanceof Sf?new d(l.value0.key+('="'+(l.value0.value+'"'))):y.value})(s))},v=function(s){return qn("")(function(l){var o=function(Cn){return or("")(Ai(function(at){return at instanceof Ju?new d(at.value0.text):y.value})(l))},p=function(Cn){var at=i(l),Rn=f(l);return"<"+(at+(" "+(Rn+(" data-deku-ssr-"+(s+('="true">'+(_(s)+("</"+(at+">")))))))))},S=po(l)(0);return S instanceof d&&S.value0 instanceof Ju?o(void 0):S instanceof d&&S.value0 instanceof Vu?o(void 0):S instanceof d&&S.value0 instanceof If?rs(S.value0.value0):p(void 0)})($i(Gt)(s)(a.idToActions))},_=function(s){var l=or([])($i(Gt)(s)(a.parentToChild));return Lt(en)(nu)(v)(l)},c=function(s){return te(tr)(function(l){return function(o){return function(p){var S=u(p);if(S)return o;if(!S)return df("data-deku-ssr-"+l)(f(p)+(" data-deku-ssr-"+l))(o);throw new Error("Failed pattern match at Deku.SSR (line 82, column 19 - line 84, column 136): "+[S.constructor.name])}}})(_(s))(a.idToActions)};return"<"+(n+(' data-deku-ssr-deku-root="true">'+(c("deku-root")+("</"+(n+">")))))}};var wd=function(n){return he(n.MonadST5().Monad0().Applicative0())(n.MonadST5())({doLogic:function(t){return function(r){return function(e){return r.sendToTop({id:e})}}},ids:function(){var t=Dt();return function(r){return function(e){return e.ids}(t(r))}}(),disconnectElement:function(t){return function(r){return t.disconnectElement({id:r.id,scope:r.scope,parent:r.parent,scopeEq:cn(Na)})}},wrapElt:function(){var t=Hn(n)("div")(ln(k(n.MonadST5().Monad0().Applicative0())));return function(r){return Tn.create(t(r))}}(),toElt:function(t){return t}})},oE=function(n){return function(){var r=Jl(),e=Qr(In)(_u(0))(Fd)();return Yt(wd(qi)({parent:new d("deku-root"),scope:new la("rootScope"),raiseId:function(a){return D(mr)(void 0)}})(e)(n))(function(a){return a(r)})()}},Ad=function(n){return tn(In)(oE(n))},uE=function(n){return function(t){return function(r){return function(e){return m(n.MonadST5().Monad0().Bind1().Apply0().Functor0())(function(){var a=xd(t);return function(u){return function(i){return r.head+i}(function(i){return i+r.tail}(a(u)))}}())(yn(n.MonadST5())(function(){var u=It(0)(),i=It([])(),f=Ed(u);return tn(Ct)(Yt(wd(Bi)({parent:new d("deku-root"),scope:new la("rootScope"),raiseId:function(v){return D(fr)(void 0)}})(f)(e))(function(v){return v(i)}))(),Tt(i)()}))}}}},Ld=function(n){return uE(n)("body")};var iE=function(){return M.value}(),Sd=function(n){return zi()(n)()(fo({reflectSymbol:function(){return"buttonClicked"}})(co(lo(n.Always2())))(fo({reflectSymbol:function(){return"sliderMoved"}})(co(lo(n.Always2())))(Ti)()())()())(bo({reflectSymbol:function(){return"buttonClicked"}})()()(bo({reflectSymbol:function(){return"sliderMoved"}})()()(ki)()()()())()()()())(M.value)(function(t){return function(r){return On(n)([jv(n)([Sn(n.MonadST5().Monad0())(`Here's an example of SSR in deku.
All of the static bits are rendered as HTML,
and all of the dynamic bits are hydrated on page load.`)]),yr(n)(wf(Kn)(zr)(Mo)($(n.MonadST5().Monad0().Applicative0())(t.buttonClicked)))([Sn(n.MonadST5().Monad0())("Click")]),On(n)([Rr(n.MonadST5().Monad0())(z($n(n.MonadST5().Monad0().Applicative0()))($(n.MonadST5().Monad0().Applicative0())("Val: 0"))(m(Kn)(function(){var e=F(Ae)("Val: "),a=N(qr);return function(u){return e(a(u))}}())(fa(Ft(n.MonadST5()))(L(Ot(Sr)(1)))(z($n(n.MonadST5().Monad0().Applicative0()))($(n.MonadST5().Monad0().Applicative0())(void 0))(r.buttonClicked))(-1))))]),On(n)([pa(n)(xf(n.MonadST5().Monad0().Applicative0())($(n.MonadST5().Monad0().Applicative0())(t.sliderMoved)))([]),On(n)([Rr(n.MonadST5().Monad0())(z($n(n.MonadST5().Monad0().Applicative0()))($(n.MonadST5().Monad0().Applicative0())("Val: 50"))(m(Kn)(function(){var e=F(Ae)("Val: "),a=N(Zo);return function(u){return e(a(u))}}())(r.sliderMoved)))])])])}})},$d=function(n){return function(t){return Nt({reflectType:function(){return`<div>
  <h1>Server-side rendering</h1>

  <h2>When performance matters!</h2>
  <p>
    In web development, it's good practice to send a plain-HTML version of your site over the wire before any JavaScript starts executing. This is called <i>server-side rendering</i>, or SSR, where the server renders HTML in an initial pass before rendering any JavaScript.
  </p>
  <p>
    The most performant form of SSR is pre-rendering HTML and serving them from memory or from a file system. This is Deku's strategy via the following two functions:
  </p>
  <ul>
    <li><code>runSSR</code> generates HTML; and</li>
    <li><code>hydrate</code> generates JavaScript that will hydrate your HTML with anything that's dynamic. Note that this is <i>partial</i> hydration, meaning it will only hydrate the bits that need hydrating. This means that, for example, you can do CSS animations on load without fear of jank when the JavaScript kicks in.</li>
  </ul>

  <p>
    This documentation is generated using SSR, and if you add <code>view-source:</code> before the URL, you'll see the intro page rendered as HTML. If you're reading this documentation on a computer screen, you won't see much of a difference, but if you're reading it on a 3G mobile network, you'll spot the difference immedaitely.
  </p>

  <h2>A motivating example</h2>

  <p>Here is a small application using SSR. We'll split it up into three files:</p>
  <ul>
    <li><code>App.purs</code> has our application logic.</li>
    <li><code>Build.purs</code> creates a <code>.js</code> file, for example <code>make.js</code>, that will render our HTML.</li>
    <li><code>Live.purs</code> uses hydration to add dynamic logic to the website.</li>
  </ul>

  <h3>App</h3>
  <p>Unlike the previous examples that used <code>runInBody</code>, our application code here has an explicit type annotation <code>Nut</code>. The definition of <code>Nut</code> is <code>type Nut = forall s m lock payload. Korok s m => Domable m lock payload</code>, and in larger projects, you may need to write this type out explicitly, for example if you are working with an <code>Array</code> of <code>Domable</code> and need <code>m</code> to be consistant over the <code>Array</code>.</p>
  ~code0~
  <h3>Build</h3>
  <p>This is the code we use to generate our HTML site. The example below creates a small script that logs our HTML to the command line,but we can also call <code>runSSR</code> from a NodeJS server, in which case we wouldn't <code>log</code> the HTML string but rather we would instead send it over the wire as the response to a request.</p>
  ~code1~
  <h3>Live</h3>
  <p><code>Live.purs</code> can be bundled to generate our dynamic JS. The JS will hydrate our elements instead of replacing them, and will only hydrate elements that potentially will interactive content.</p>
  ~code2~

  <h3>Result</h3>

  <p>Here is the resulting code from our static-site generation. It is rendered dynamically in your browser, but in production settings, we'd use NodeJS to render or pre-render this HTML.</p>

  ~codegen~

  <p>And here is what the result looks like after hydration.</p>

  <blockquote> ~result~ </blockquote>

  <h2>Parting shot</h2>
  <p>Thanks for checking out Deku! I had a blast writing it, and I hope you enjoy using it for your projects!</p>
</div>`}})()()(Vn()(Vn()(Vn()(Vn()(Vn()(At(t.MonadST5().Monad0().Applicative0()))({reflectType:function(){return"result"}})({reflectSymbol:function(){return"result"}})(t))({reflectType:function(){return"codegen"}})({reflectSymbol:function(){return"codegen"}})(t))({reflectType:function(){return"code2"}})({reflectSymbol:function(){return"code2"}})(t))({reflectType:function(){return"code1"}})({reflectSymbol:function(){return"code1"}})(t))({reflectType:function(){return"code0"}})({reflectSymbol:function(){return"code0"}})(t))(t)(iE)({code2:zn(wt(t)([xt(t)([Sn(t.MonadST5().Monad0())(`module Live where

import Prelude

import App (app)
import Deku.Toplevel (hydrate)
import Effect (Effect)

main :: Effect Unit
main = hydrate app`)])])),code1:zn(wt(t)([xt(t)([Sn(t.MonadST5().Monad0())(`module Build where

import Prelude

import App (app)
import Deku.Toplevel (Template(..), runSSR)
import Effect (Effect)
import Effect.Console (log)

main :: Effect Unit
main =
  runSSR
    ( Template
        { head: "<!DOCTYPE html><html><head><script src=\\"bundle.js\\" defer><\/script></head>"
        , tail: "</html>"
        }
    )
    app >>= log`)])])),code0:zn(wt(t)([xt(t)([Sn(t.MonadST5().Monad0())(`module App where

import Prelude

import Control.Alt ((<|>))
import Deku.Control (text, text_)
import Deku.DOM as D
import Deku.Listeners (click_, slider)
import Deku.Core (Nut, vbussed)
import FRP.Event (bang, fold)
import FRP.Event.VBus (V)
import Type.Proxy (Proxy(..))

type UIEvents = V
  ( buttonClicked :: Unit
  , sliderMoved :: Number
  )

app :: Nut
app = vbussed (Proxy :: _ UIEvents) \\push event -> do
  D.div_
    [ D.p_
        [ text_
            """Here's an example of SSR in deku.
All of the static bits are rendered as HTML,
and all of the dynamic bits are hydrated on page load."""
        ]
    , D.button
        (click_ (bang push.buttonClicked))
        [ text_ "Click" ]
    , D.div_
        [ text
            ( bang "Val: 0" <|>
                ( append "Val: " <<< show
                    <$> fold
                      (const (add 1))
                      (bang unit <|> event.buttonClicked)
                      (-1)
                )
            )
        ]
    , D.div_
        [ D.input
            (slider (bang push.sliderMoved))
            []
        , D.div_
            [ text
                ( bang "Val: 50" <|>
                    ( map
                        (append "Val: " <<< show)
                        event.sliderMoved
                    )
                )
            ]
        ]
    ]
`)])])),result:zn(Sd(t)),codegen:zn(wt(t)([xt(t)([Rr(t.MonadST5().Monad0())(Dr(function(r){return rn(t.MonadST5().Monad0().Bind1().Apply0())(b(t.MonadST5().Monad0().Bind1())(Ld(t)({head:'<!DOCTYPE html><html><head><script src="bundle.js" defer><\/script></head>',tail:"</html>"})(Sd(Bi)))(r))(D(t.MonadST5().Monad0().Applicative0())(D(t.MonadST5().Monad0().Applicative0())(void 0)))}))])]))})}};var Pd=function(n){return function(t){var r=function(a){if(a instanceof Ki)return Nv;if(a instanceof Ao)return Pv;if(a instanceof Lo)return Kp;if(a instanceof Io)return Vv;if(a instanceof $o)return wv;if(a instanceof Po)return Cv;if(a instanceof So)return Jv;if(a instanceof No)return $v;if(a instanceof Ro)return zv;if(a instanceof ko)return $d;throw new Error("Failed pattern match at Deku.Example.Docs.Scene (line 96, column 3 - line 96, column 25): "+[a.constructor.name])},e=function(a){return function(u){return r(u)({dpage:a,slug:n.slug})(t)}};return ho(t)(t.Always2())(function(a){return Ar(dr)(function(u){return z($n(t.MonadST5().Monad0().Applicative0()))($(t.MonadST5().Monad0().Applicative0())(n.startsWith))(u)})(function(u){return On(t)([On(t)(m(lt)(function(i){return wu(t)([Xi(t)(ft(en)(k(t.MonadST5().Monad0().Applicative0()))($(t.MonadST5().Monad0().Applicative0()))([O(mt)(et.value)(nt(function(f){return rn(Yn)(Rt(f))(a(i.value0))})),O(Hp)(lr.value)("cursor:pointer;"),O(Pt)($t.value)(n.slug+i.value1.value1.value0)]))([Sn(t.MonadST5().Monad0())(i.value1.value0)]),Wa(t)($(t.MonadST5().Monad0().Applicative0())(O(xo)(lr.value)(function(){return i.value1.value1.value1?"":"display:none;"}())))([Sn(t.MonadST5().Monad0())(" | ")])])})([new C(Ki.value,new C("Home",new C("",!0))),new C(Ao.value,new C("Hello world",new C("hello/",!0))),new C(Lo.value,new C("Component",new C("simple/",!0))),new C(Io.value,new C("Pursx 1",new C("pursx1/",!0))),new C($o.value,new C("Events 1",new C("events1/",!0))),new C(Po.value,new C("Effects",new C("effects/",!0))),new C(So.value,new C("Pursx 2",new C("pursx2/",!0))),new C(No.value,new C("Events 2",new C("events2/",!0))),new C(Ro.value,new C("Portals",new C("portals/",!0))),new C(ko.value,new C("SSR",new C("ssr/",!1)))])),On(t)([hu(t.MonadST5())(e(a))(u)])])})})}};var H7=function(n){return function(){var r=qn(Iu(Wo("could not ingest options: "+N(ws()()(Wf({reflectSymbol:function(){return"slug"}})(Wf({reflectSymbol:function(){return"startsWith"}})(Ms)(sr))(sr)))(n))))(D(mr))(Gp(n.startsWith))();return Ad(Pd({slug:n.slug,startsWith:r})(qi))()}};export{H7 as main};
